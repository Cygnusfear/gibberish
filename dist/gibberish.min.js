!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Gibberish=e()}}(function(){return function e(t,s,n){function i(r,o){if(!s[r]){if(!t[r]){var u="function"==typeof require&&require;if(!o&&u)return u(r,!0);if(a)return a(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var c=s[r]={exports:{}};t[r][0].call(c.exports,function(e){var s=t[r][1][e];return i(s||e)},c,c.exports,e,t,s,n)}return s[r].exports}for(var a="function"==typeof require&&require,r=0;r<n.length;r++)i(n[r]);return i}({1:[function(e,t,s){"use strict";let n=e("./gen.js"),i={name:"abs",gen(){let e,t=n.getInputs(this);const s="worklet"===n.mode,i=s?"":"gen.";return isNaN(t[0])?(n.closures.add({[this.name]:s?"Math.abs":Math.abs}),e=`${i}abs( ${t[0]} )`):e=Math.abs(parseFloat(t[0])),e}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t})},{"./gen.js":30}],2:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"accum",gen(){let e,t=n.getInputs(this),s="gen."+this.name;return n.requestMemory(this.memory),n.memory.heap[this.memory.value.idx]=this.initialValue,e=this.callback(s,t[0],t[1],`memory[${this.memory.value.idx}]`),n.memo[this.name]=this.name+"_value",[this.name+"_value",e]},callback(e,t,s,n){let i=this.max-this.min,a="",r="";return"number"==typeof this.inputs[1]&&this.inputs[1]<1||(this.resetValue!==this.min?a+=`  if( ${s} >=1 ) ${n} = ${this.resetValue}\n\n`:a+=`  if( ${s} >=1 ) ${n} = ${this.min}\n\n`),a+=`  var ${this.name}_value = ${n}\n`,!1===this.shouldWrap&&!0===this.shouldClamp?a+=`  if( ${n} < ${this.max} ) ${n} += ${t}\n`:a+=`  ${n} += ${t}\n`,this.max!==1/0&&this.shouldWrapMax&&(r+=`  if( ${n} >= ${this.max} ) ${n} -= ${i}\n`),this.min!==-1/0&&this.shouldWrapMin&&(r+=`  if( ${n} < ${this.min} ) ${n} += ${i}\n`),a=a+r+"\n"},defaults:{min:0,max:1,resetValue:0,initialValue:0,shouldWrap:!0,shouldWrapMax:!0,shouldWrapMin:!0,shouldClamp:!1}};t.exports=((e,t=0,s)=>{const a=Object.create(i);return Object.assign(a,{uid:n.getUID(),inputs:[e,t],memory:{value:{length:1,idx:null}}},i.defaults,s),void 0!==s&&void 0===s.shouldWrapMax&&void 0===s.shouldWrapMin&&void 0!==s.shouldWrap&&(a.shouldWrapMin=a.shouldWrapMax=s.shouldWrap),void 0!==s&&void 0===s.resetValue&&(a.resetValue=a.min),void 0===a.initialValue&&(a.initialValue=a.min),Object.defineProperty(a,"value",{get(){return n.memory.heap[this.memory.value.idx]},set(e){n.memory.heap[this.memory.value.idx]=e}}),a.name=`${a.basename}${a.uid}`,a})},{"./gen.js":30}],3:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"acos",gen(){let e,t=n.getInputs(this);const s="worklet"===n.mode,i=s?"":"gen.";return isNaN(t[0])?(n.closures.add({acos:s?"Math.acos":Math.acos}),e=`${i}acos( ${t[0]} )`):e=Math.acos(parseFloat(t[0])),e}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t.id=n.getUID(),t.name=`${t.basename}{acos.id}`,t})},{"./gen.js":30}],4:[function(e,t,s){"use strict";let n=e("./gen.js"),i=(e("./mul.js"),e("./sub.js")),a=e("./div.js"),r=e("./data.js"),o=e("./peek.js"),u=e("./accum.js"),l=e("./ifelseif.js"),c=e("./lt.js"),m=e("./bang.js"),d=e("./env.js"),h=e("./add.js"),p=e("./poke.js"),f=e("./neq.js"),g=e("./and.js"),j=e("./gte.js"),b=(e("./memo.js"),e("./utilities.js"));t.exports=((e=44100,t=44100,s)=>{const y=Object.assign({},{shape:"exponential",alpha:5,trigger:null},s),x=null!==y.trigger?y.trigger:m(),v=u(1,x,{min:0,max:1/0,initialValue:-1/0,shouldWrap:!1});let $,_,w,k=r([0]);"linear"===y.shape?w=l(g(j(v,0),c(v,e)),a(v,e),g(j(v,0),c(v,h(e,t))),i(1,a(i(v,e),t)),f(v,-1/0),p(k,1,0,{inline:0}),0):($=d({length:1024,type:y.shape,alpha:y.alpha}),_=d({length:1024,type:y.shape,alpha:y.alpha,reverse:!0}),w=l(g(j(v,0),c(v,e)),o($,a(v,e),{boundmode:"clamp"}),g(j(v,0),c(v,h(e,t))),o(_,a(i(v,e),t),{boundmode:"clamp"}),f(v,-1/0),p(k,1,0,{inline:0}),0));const O="worklet"===n.mode;return!0===O&&(w.node=null,b.register(w)),w.isComplete=(()=>{if(!0===O&&null!==w.node){return new Promise(e=>{w.node.getMemoryValue(k.memory.values.idx,e)})}return n.memory.heap[k.memory.values.idx]}),w.trigger=(()=>{!0===O&&null!==w.node?w.node.port.postMessage({key:"set",idx:k.memory.values.idx,value:0}):n.memory.heap[k.memory.values.idx]=0,x.trigger()}),w})},{"./accum.js":2,"./add.js":5,"./and.js":7,"./bang.js":11,"./data.js":18,"./div.js":23,"./env.js":24,"./gen.js":30,"./gte.js":32,"./ifelseif.js":35,"./lt.js":38,"./memo.js":42,"./mul.js":48,"./neq.js":49,"./peek.js":54,"./poke.js":56,"./sub.js":66,"./utilities.js":72}],5:[function(e,t,s){"use strict";const n=e("./gen.js"),i={basename:"add",gen(){let e=n.getInputs(this),t="",s=0,i=0,a=!1,r=!0;return 0===e.length?0:(t=`  var ${this.name} = `,e.forEach((n,o)=>{isNaN(n)?(t+=n,o<e.length-1&&(a=!0,t+=" + "),r=!1):(s+=parseFloat(n),i++)}),i>0&&(t+=a||r?s:" + "+s),t+="\n",n.memo[this.name]=this.name,[this.name,t])}};t.exports=((...e)=>{const t=Object.create(i);return t.id=n.getUID(),t.name=t.basename+t.id,t.inputs=e,t})},{"./gen.js":30}],6:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./mul.js"),a=e("./sub.js"),r=e("./div.js"),o=e("./data.js"),u=e("./peek.js"),l=e("./accum.js"),c=e("./ifelseif.js"),m=e("./lt.js"),d=e("./bang.js"),h=e("./env.js"),p=e("./param.js"),f=e("./add.js"),g=e("./gtp.js"),j=e("./not.js"),b=e("./and.js"),y=e("./neq.js"),x=e("./poke.js");t.exports=((e=44,t=22050,s=44100,v=.6,$=44100,_)=>{let w,k,O,M,N,I=d(),S=l(1,I,{max:1/0,shouldWrap:!1,initialValue:1/0}),P=p(1),q=Object.assign({},{shape:"exponential",alpha:5,triggerRelease:!1},_);const D=o([0]);w=h({length:1024,alpha:q.alpha,shift:0,type:q.shape}),O=q.triggerRelease?P:m(S,f(e,t,s)),M=q.triggerRelease?g(a(v,l(r(v,$),0,{shouldWrap:!1})),0):a(v,i(r(a(S,f(e,t,s)),$),v)),N=q.triggerRelease?j(P):m(S,f(e,t,s,$)),k=c(m(S,e),u(w,r(S,e),{boundmode:"clamp"}),m(S,f(e,t)),u(w,a(1,i(r(a(S,e),t),a(1,v))),{boundmode:"clamp"}),b(O,y(S,1/0)),u(w,v),N,u(w,M,{boundmode:"clamp"}),y(S,1/0),x(D,1,0,{inline:0}),0);const U="worklet"===n.mode;return!0===U&&(k.node=null,utilities.register(k)),k.trigger=(()=>{P.value=1,I.trigger()}),k.isComplete=(()=>{if(!0===U&&null!==k.node){return new Promise(e=>{k.node.getMemoryValue(D.memory.values.idx,e)})}return n.memory.heap[D.memory.values.idx]}),k.release=(()=>{P.value=0,U&&null!==k.node?(console.log("worklet??"),k.node.port.postMessage({key:"set",idx:M.inputs[0].inputs[1].memory.value.idx,value:0})):(console.log("non-worklet..."),n.memory.heap[M.inputs[0].inputs[1].memory.value.idx]=0)}),k})},{"./accum.js":2,"./add.js":5,"./and.js":7,"./bang.js":11,"./data.js":18,"./div.js":23,"./env.js":24,"./gen.js":30,"./gtp.js":33,"./ifelseif.js":35,"./lt.js":38,"./mul.js":48,"./neq.js":49,"./not.js":51,"./param.js":53,"./peek.js":54,"./poke.js":56,"./sub.js":66}],7:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"and",gen(){let e,t=n.getInputs(this);return e=`  var ${this.name} = (${t[0]} !== 0 && ${t[1]} !== 0) | 0\n\n`,n.memo[this.name]=`${this.name}`,[`${this.name}`,e]}};t.exports=((e,t)=>{let s=Object.create(i);return Object.assign(s,{uid:n.getUID(),inputs:[e,t]}),s.name=`${s.basename}${s.uid}`,s})},{"./gen.js":30}],8:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"asin",gen(){let e,t=n.getInputs(this);const s="worklet"===n.mode,i=s?"":"gen.";return isNaN(t[0])?(n.closures.add({asin:s?"Math.sin":Math.asin}),e=`${i}asin( ${t[0]} )`):e=Math.asin(parseFloat(t[0])),e}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t.id=n.getUID(),t.name=`${t.basename}{asin.id}`,t})},{"./gen.js":30}],9:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"atan",gen(){let e,t=n.getInputs(this);const s="worklet"===n.mode,i=s?"":"gen.";return isNaN(t[0])?(n.closures.add({atan:s?"Math.atan":Math.atan}),e=`${i}atan( ${t[0]} )`):e=Math.atan(parseFloat(t[0])),e}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t.id=n.getUID(),t.name=`${t.basename}{atan.id}`,t})},{"./gen.js":30}],10:[function(e,t,s){"use strict";e("./gen.js");let n=e("./history.js"),i=e("./mul.js"),a=e("./sub.js");t.exports=((e=44100)=>{let t=n(1),s=Math.exp(-6.907755278921/e);return t.in(i(t.out,s)),t.out.trigger=(()=>{t.value=1}),a(1,t.out)})},{"./gen.js":30,"./history.js":34,"./mul.js":48,"./sub.js":66}],11:[function(e,t,s){"use strict";let n=e("./gen.js"),i={gen(){n.requestMemory(this.memory);let e=`  var ${this.name} = memory[${this.memory.value.idx}]\n  if( ${this.name} === 1 ) memory[${this.memory.value.idx}] = 0      \n      \n`;return n.memo[this.name]=this.name,[this.name,e]}};t.exports=(e=>{let t=Object.create(i),s=Object.assign({},{min:0,max:1},e);t.name="bang"+n.getUID(),t.min=s.min,t.max=s.max;const a="worklet"===n.mode;return!0===a&&(t.node=null,utilities.register(t)),t.trigger=(()=>{!0===a&&null!==t.node?t.node.port.postMessage({key:"set",idx:t.memory.value.idx,value:t.max}):n.memory.heap[t.memory.value.idx]=t.max}),t.memory={value:{length:1,idx:null}},t})},{"./gen.js":30}],12:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"bool",gen(){let e;return e=`${n.getInputs(this)[0]} === 0 ? 0 : 1`}};t.exports=(e=>{let t=Object.create(i);return Object.assign(t,{uid:n.getUID(),inputs:[e]}),t.name=`${t.basename}${t.uid}`,t})},{"./gen.js":30}],13:[function(e,t,s){"use strict";let n=e("./gen.js"),i={name:"ceil",gen(){let e,t=n.getInputs(this);const s="worklet"===n.mode,i=s?"":"gen.";return isNaN(t[0])?(n.closures.add({[this.name]:s?"Math.ceil":Math.ceil}),e=`${i}ceil( ${t[0]} )`):e=Math.ceil(parseFloat(t[0])),e}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t})},{"./gen.js":30}],14:[function(e,t,s){"use strict";let n=e("./gen.js"),i=(e("./floor.js"),e("./sub.js"),e("./memo.js"),{basename:"clip",gen(){let e,t=n.getInputs(this);return e=" "+(e=` var ${this.name} = ${t[0]}\n  if( ${this.name} > ${t[2]} ) ${this.name} = ${t[2]}\n  else if( ${this.name} < ${t[1]} ) ${this.name} = ${t[1]}\n`),n.memo[this.name]=this.name,[this.name,e]}});t.exports=((e,t=-1,s=1)=>{let a=Object.create(i);return Object.assign(a,{min:t,max:s,uid:n.getUID(),inputs:[e,t,s]}),a.name=`${a.basename}${a.uid}`,a})},{"./floor.js":27,"./gen.js":30,"./memo.js":42,"./sub.js":66}],15:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"cos",gen(){let e,t=n.getInputs(this);const s="worklet"===n.mode,i=s?"":"gen.";return isNaN(t[0])?(n.closures.add({cos:s?"Math.cos":Math.cos}),e=`${i}cos( ${t[0]} )`):e=Math.cos(parseFloat(t[0])),e}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t.id=n.getUID(),t.name=`${t.basename}{cos.id}`,t})},{"./gen.js":30}],16:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"counter",gen(){let e,t=n.getInputs(this),s="gen."+this.name;return null===this.memory.value.idx&&n.requestMemory(this.memory),e=this.callback(s,t[0],t[1],t[2],t[3],t[4],`memory[${this.memory.value.idx}]`,`memory[${this.memory.wrap.idx}]`),n.memo[this.name]=this.name+"_value",void 0===n.memo[this.wrap.name]&&this.wrap.gen(),[this.name+"_value",e]},callback(e,t,s,n,i,a,r,o){let u=this.max-this.min,l="",c="";return"number"==typeof this.inputs[3]&&this.inputs[3]<1||(l+=`  if( ${i} >= 1 ) ${r} = ${s}\n`),l+=`  var ${this.name}_value = ${r};\n  ${r} += ${t}\n`,"number"==typeof this.max&&this.max!==1/0&&"number"!=typeof this.min?c=`  if( ${r} >= ${this.max} &&  ${a} > 0) {\n    ${r} -= ${u}\n    ${o} = 1\n  }else{\n    ${o} = 0\n  }\n`:this.max!==1/0&&this.min!==1/0?c=`  if( ${r} >= ${n} &&  ${a} > 0) {\n    ${r} -= ${n} - ${s}\n    ${o} = 1\n  }else if( ${r} < ${s} &&  ${a} > 0) {\n    ${r} += ${n} - ${s}\n    ${o} = 1\n  }else{\n    ${o} = 0\n  }\n`:l+="\n",l+=c}};t.exports=((e=1,t=0,s=1/0,a=0,r=1,o)=>{let u=Object.create(i),l={initialValue:0,shouldWrap:!0};return void 0!==o&&Object.assign(l,o),Object.assign(u,{min:t,max:s,value:l.initialValue,uid:n.getUID(),inputs:[e,t,s,a,r],memory:{value:{length:1,idx:null},wrap:{length:1,idx:null}},wrap:{gen(){return null===u.memory.wrap.idx&&n.requestMemory(u.memory),n.getInputs(this),n.memo[this.name]=`memory[ ${u.memory.wrap.idx} ]`,`memory[ ${u.memory.wrap.idx} ]`}}},l),Object.defineProperty(u,"value",{get(){if(null!==this.memory.value.idx)return n.memory.heap[this.memory.value.idx]},set(e){null!==this.memory.value.idx&&(n.memory.heap[this.memory.value.idx]=e)}}),u.wrap.inputs=[u],u.name=`${u.basename}${u.uid}`,u.wrap.name=u.name+"_wrap",u})},{"./gen.js":30}],17:[function(e,t,s){"use strict";let n=e("./gen.js"),i=(e("./phasor.js"),e("./data.js")),a=e("./peek.js"),r=(e("./mul.js"),e("./phasor.js")),o={basename:"cycle",initTable(){let e=new Float32Array(1024);for(let t=0,s=e.length;t<s;t++)e[t]=Math.sin(t/s*(2*Math.PI));n.globals.cycle=i(e,1,{immutable:!0})}};t.exports=((e=1,t=0,s)=>{void 0===n.globals.cycle&&o.initTable();const i=Object.assign({},{min:0},s),u=a(n.globals.cycle,r(e,t,i));return u.name="cycle"+n.getUID(),u})},{"./data.js":18,"./gen.js":30,"./mul.js":48,"./peek.js":54,"./phasor.js":55}],18:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./utilities.js"),a=e("./peek.js"),r=e("./poke.js"),o={basename:"data",globals:{},gen(){let e;if(void 0===n.memo[this.name]){n.requestMemory(this.memory,this.immutable),e=this.memory.values.idx;try{n.memory.heap.set(this.buffer,e)}catch(e){throw console.log(e),Error("error with request. asking for "+this.buffer.length+". current index: "+n.memoryIndex+" of "+n.memory.heap.length)}n.memo[this.name]=e}else e=n.memo[this.name];return e}};t.exports=((e,t=1,s)=>{let u,l,c=!1;if(void 0!==s&&void 0!==s.global&&n.globals[s.global])return n.globals[s.global];if("number"==typeof e)if(1!==t){l=[];for(let s=0;s<t;s++)l[s]=new Float32Array(e)}else l=new Float32Array(e);else if(Array.isArray(e)){let t=e.length;l=new Float32Array(t);for(let t=0;t<e.length;t++)l[t]=e[t]}else"string"==typeof e?(l={length:t>1?t:60*n.samplerate},c=!0):e instanceof Float32Array&&(l=e);if(u=Object.create(o),Object.assign(u,{buffer:l,name:o.basename+n.getUID(),dim:l.length,channels:1,onload:null,then:e=>(u.onload=e,u),immutable:void 0!==s&&!0===s.immutable,load(e){i.loadSample(e,u).then(e=>{u.memory.values.length=u.dim=e.length,u.onload()})},memory:{values:{length:l.length,idx:null}}}),c&&u.load(e),void 0!==s&&(void 0!==s.global&&(n.globals[s.global]=u),!0===s.meta))for(let e=0,t=u.buffer.length;e<t;e++)Object.defineProperty(u,e,{get:()=>a(u,e,{mode:"simple",interp:"none"}),set:t=>r(u,t,e)});return u})},{"./gen.js":30,"./peek.js":54,"./poke.js":56,"./utilities.js":72}],19:[function(e,t,s){"use strict";e("./gen.js");let n=e("./history.js"),i=e("./sub.js"),a=e("./add.js"),r=e("./mul.js"),o=e("./memo.js");t.exports=(e=>{let t,s=n(),u=n();return t=o(a(i(e,s.out),r(u.out,.9997))),s.in(e),u.in(t),t})},{"./add.js":5,"./gen.js":30,"./history.js":34,"./memo.js":42,"./mul.js":48,"./sub.js":66}],20:[function(e,t,s){"use strict";e("./gen.js");let n=e("./history.js"),i=e("./mul.js"),a=e("./t60.js");t.exports=((e=44100,t)=>{let s=Object.assign({},{initValue:1},t),r=n(s.initValue);return r.in(i(r.out,a(e))),r.out.trigger=(()=>{r.value=1}),r.out})},{"./gen.js":30,"./history.js":34,"./mul.js":48,"./t60.js":68}],21:[function(e,t,s){"use strict";const n=e("./gen.js"),i=e("./data.js"),a=e("./poke.js"),r=e("./peek.js"),o=e("./sub.js"),u=e("./wrap.js"),l=e("./accum.js"),c=(e("./memo.js"),{basename:"delay",gen(){let e=n.getInputs(this);return n.memo[this.name]=e[0],e[0]}}),m={size:512,interp:"none"};t.exports=((e,t,s)=>{const d=Object.create(c);let h,p;!1===Array.isArray(t)&&(t=[t]);const f=Object.assign({},m,s),g=Math.max(...t);f.size<g&&(f.size=g),p=i(f.size),d.inputs=[],h=l(1,0,{max:f.size,min:0});for(let e=0;e<t.length;e++)d.inputs[e]=r(p,u(o(h,t[e]),0,f.size),{mode:"samples",interp:f.interp});return d.outputs=d.inputs,a(p,e,h),d.name=`${d.basename}${n.getUID()}`,d})},{"./accum.js":2,"./data.js":18,"./gen.js":30,"./memo.js":42,"./peek.js":54,"./poke.js":56,"./sub.js":66,"./wrap.js":74}],22:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./history.js"),a=e("./sub.js");t.exports=(e=>{let t=i();t.in(e);let s=a(e,t.out);return s.name="delta"+n.getUID(),s})},{"./gen.js":30,"./history.js":34,"./sub.js":66}],23:[function(e,t,s){"use strict";let n=e("./gen.js");const i={basename:"div",gen(){let e=n.getInputs(this),t=`  var ${this.name} = `,s=e[0],i=isNaN(s);return e.forEach((n,a)=>{if(0===a)return;let r=isNaN(n),o=a===e.length-1;t+=i||r?`${s} / ${n}`:s/=n,o||(t+=" / ")}),t+="\n",n.memo[this.name]=this.name,[this.name,t]}};t.exports=((...e)=>{const t=Object.create(i);return Object.assign(t,{id:n.getUID(),inputs:e}),t.name=t.basename+t.id,t})},{"./gen.js":30}],24:[function(e,t,s){"use strict";let n=e("./gen"),i=e("./windows"),a=e("./data"),r=(e("./peek"),e("./phasor"),{type:"triangular",length:1024,alpha:.15,shift:0,reverse:!1});t.exports=(e=>{let t=Object.assign({},r,e),s=new Float32Array(t.length),o=t.type+"_"+t.length+"_"+t.shift+"_"+t.reverse+"_"+t.alpha;if(void 0===n.globals.windows[o]){for(let e=0;e<t.length;e++)s[e]=i[t.type](t.length,e,t.alpha,t.shift);!0===t.reverse&&s.reverse(),n.globals.windows[o]=a(s)}let u=n.globals.windows[o];return u.name="env"+n.getUID(),u})},{"./data":18,"./gen":30,"./peek":54,"./phasor":55,"./windows":73}],25:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"eq",gen(){let e,t=n.getInputs(this);return e=this.inputs[0]===this.inputs[1]?1:`  var ${this.name} = (${t[0]} === ${t[1]}) | 0\n\n`,n.memo[this.name]=`${this.name}`,[`${this.name}`,e]}};t.exports=((e,t)=>{let s=Object.create(i);return Object.assign(s,{uid:n.getUID(),inputs:[e,t]}),s.name=`${s.basename}${s.uid}`,s})},{"./gen.js":30}],26:[function(e,t,s){"use strict";let n=e("./gen.js"),i={name:"exp",gen(){let e,t=n.getInputs(this);const s="worklet"===n.mode,i=s?"":"gen.";return isNaN(t[0])?(n.closures.add({[this.name]:s?"Math.exp":Math.exp}),e=`${i}exp( ${t[0]} )`):e=Math.exp(parseFloat(t[0])),e}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t})},{"./gen.js":30}],27:[function(e,t,s){"use strict";let n=e("./gen.js"),i={name:"floor",gen(){let e,t=n.getInputs(this);return e=isNaN(t[0])?`( ${t[0]} | 0 )`:0|t[0]}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t})},{"./gen.js":30}],28:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"fold",gen(){let e,t=n.getInputs(this);return e=this.createCallback(t[0],this.min,this.max),n.memo[this.name]=this.name+"_value",[this.name+"_value",e]},createCallback(e,t,s){return" "+` var ${this.name}_value = ${e},\n      ${this.name}_range = ${s} - ${t},\n      ${this.name}_numWraps = 0\n\n  if(${this.name}_value >= ${s}){\n    ${this.name}_value -= ${this.name}_range\n    if(${this.name}_value >= ${s}){\n      ${this.name}_numWraps = ((${this.name}_value - ${t}) / ${this.name}_range) | 0\n      ${this.name}_value -= ${this.name}_range * ${this.name}_numWraps\n    }\n    ${this.name}_numWraps++\n  } else if(${this.name}_value < ${t}){\n    ${this.name}_value += ${this.name}_range\n    if(${this.name}_value < ${t}){\n      ${this.name}_numWraps = ((${this.name}_value - ${t}) / ${this.name}_range- 1) | 0\n      ${this.name}_value -= ${this.name}_range * ${this.name}_numWraps\n    }\n    ${this.name}_numWraps--\n  }\n  if(${this.name}_numWraps & 1) ${this.name}_value = ${s} + ${t} - ${this.name}_value\n`}};t.exports=((e,t=0,s=1)=>{let a=Object.create(i);return Object.assign(a,{min:t,max:s,uid:n.getUID(),inputs:[e]}),a.name=`${a.basename}${a.uid}`,a})},{"./gen.js":30}],29:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"gate",controlString:null,gen(){let e,t=n.getInputs(this);n.requestMemory(this.memory);let s="memory[ "+this.memory.lastInput.idx+" ]",i=this.memory.lastInput.idx+1,a=t[0],r=t[1];return e=` if( ${r} !== ${s} ) {\n    memory[ ${s} + ${i}  ] = 0 \n    ${s} = ${r}\n  }\n  memory[ ${i} + ${r} ] = ${a}\n\n`,this.controlString=t[1],this.initialized=!0,n.memo[this.name]=this.name,this.outputs.forEach(e=>e.gen()),[null," "+e]},childgen(){return!1===this.parent.initialized&&n.getInputs(this),void 0===n.memo[this.name]&&(n.requestMemory(this.memory),n.memo[this.name]=`memory[ ${this.memory.value.idx} ]`),`memory[ ${this.memory.value.idx} ]`}};t.exports=((e,t,s)=>{let a=Object.create(i),r={count:2};void 0!==typeof s&&Object.assign(r,s),Object.assign(a,{outputs:[],uid:n.getUID(),inputs:[t,e],memory:{lastInput:{length:1,idx:null}},initialized:!1},r),a.name=`${a.basename}${n.getUID()}`;for(let e=0;e<a.count;e++)a.outputs.push({index:e,gen:i.childgen,parent:a,inputs:[a],memory:{value:{length:1,idx:null}},initialized:!1,name:`${a.name}_out${n.getUID()}`});return a})},{"./gen.js":30}],30:[function(e,t,s){"use strict";let n=e("memory-helper"),i={accum:0,getUID(){return this.accum++},debug:!1,samplerate:44100,shouldLocalize:!1,globals:{windows:{}},mode:"worklet",closures:new Set,params:new Set,inputs:new Set,parameters:new Set,endBlock:new Set,histories:new Map,memo:{},export(e){},addToEndBlock(e){this.endBlock.add("  "+e)},requestMemory(e,t=!1){for(let s in e){let n=e[s];void 0!==n.length?n.idx=i.memory.alloc(n.length,t):console.log("undefined length for:",s)}},createMemory(e,t){const s=n.create(s,t)},createCallback(e,t,s=!1,i=!1,a=Float64Array){let r,o=Array.isArray(e)&&e.length>1;"number"!=typeof t&&void 0!==t||(t=n.create(t,a)),this.memory=t,this.outputIdx=this.memory.alloc(2,!0),this.memo={},this.endBlock.clear(),this.closures.clear(),this.inputs.clear(),this.params.clear(),this.parameters.clear(),this.functionBody="  'use strict'\n",!1===i&&(this.functionBody+="worklet"===this.mode?"  var memory = this.memory\n\n":"  var memory = gen.memory\n\n");for(let t=0;t<1+o;t++){if("number"==typeof e[t])continue;let s=o?this.getInput(e[t]):this.getInput(e),n="";(n=(n+=Array.isArray(s)?s[1]+"\n"+s[0]:s).split("\n"))[n.length-1].trim().indexOf("let")>-1&&n.push("\n");let i=n.length-1;n[i]="  memory["+(this.outputIdx+t)+"]  = "+n[i]+"\n",this.functionBody+=n.join("\n")}this.histories.forEach(e=>{null!==e&&e.gen()});const u=o?`  return [ memory[${this.outputIdx}], memory[${this.outputIdx+1}] ]`:`  return memory[${this.outputIdx}]`;this.functionBody=this.functionBody.split("\n"),this.endBlock.size?(this.functionBody=this.functionBody.concat(Array.from(this.endBlock)),this.functionBody.push(u)):this.functionBody.push(u),this.functionBody=this.functionBody.join("\n"),!0===i&&this.parameters.add("memory");let l="";if("worklet"===this.mode){for(let e of this.parameters.values())l+=e+",";l=l.slice(0,-1)}const c=0!==this.parameters.size&&this.inputs.size>0?", ":"";let m="";if("worklet"===this.mode){for(let e of this.inputs.values())m+=e.name+",";m=m.slice(0,-1)}let d="worklet"===this.mode?`return function( ${m} ${c} ${l} ){ \n${this.functionBody}\n}`:`return function gen( ${[...this.parameters].join(",")} ){ \n${this.functionBody}\n}`;(this.debug||s)&&console.log(d),r=new Function(d)();for(let e of this.closures.values()){let t=Object.keys(e)[0],s=e[t];r[t]=s}for(let e of this.params.values()){let t=Object.keys(e)[0],s=e[t];Object.defineProperty(r,t,{configurable:!0,get:()=>s.value,set(e){s.value=e}})}return r.members=this.closures,r.data=this.data,r.params=this.params,r.inputs=this.inputs,r.parameters=this.parameters,r.isStereo=o,r.memory=this.memory.heap,this.histories.clear(),r},getInputs:e=>e.inputs.map(i.getInput),getInput(e){let t;if("object"==typeof e)if(i.memo[e.name])t=i.memo[e.name];else if(Array.isArray(e))i.getInput(e[0]),i.getInput(e[1]);else{"function"!=typeof e.gen&&console.log("no gen found:",e,e.gen);let s=e.gen();Array.isArray(s)?(i.shouldLocalize?(i.codeName=s[0],i.localizedCode.push(s[1])):i.functionBody+=s[1],t=s[0]):t=s}else t=e;return t},startLocalize(){this.localizedCode=[],this.shouldLocalize=!0},endLocalize(){return this.shouldLocalize=!1,[this.codeName,this.localizedCode.slice(0)]},free(e){if(Array.isArray(e))for(let t of e)this.free(t);else if("object"==typeof e){if(void 0!==e.memory)for(let t in e.memory)this.memory.free(e.memory[t].idx);if(Array.isArray(e.inputs))for(let t of e.inputs)this.free(t)}}};t.exports=i},{"memory-helper":141}],31:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"gt",gen(){let e,t=n.getInputs(this);return e=`  var ${this.name} = `,isNaN(this.inputs[0])||isNaN(this.inputs[1])?e+=`(( ${t[0]} > ${t[1]}) | 0 )`:e+=t[0]>t[1]?1:0,e+="\n\n",n.memo[this.name]=this.name,[this.name,e]}};t.exports=((e,t)=>{let s=Object.create(i);return s.inputs=[e,t],s.name=s.basename+n.getUID(),s})},{"./gen.js":30}],32:[function(e,t,s){"use strict";let n=e("./gen.js"),i={name:"gte",gen(){let e,t=n.getInputs(this);return e=`  var ${this.name} = `,isNaN(this.inputs[0])||isNaN(this.inputs[1])?e+=`( ${t[0]} >= ${t[1]} | 0 )`:e+=t[0]>=t[1]?1:0,e+="\n\n",n.memo[this.name]=this.name,[this.name,e]}};t.exports=((e,t)=>{let s=Object.create(i);return s.inputs=[e,t],s.name="gte"+n.getUID(),s})},{"./gen.js":30}],33:[function(e,t,s){"use strict";let n=e("./gen.js"),i={name:"gtp",gen(){let e,t=n.getInputs(this);return e=isNaN(this.inputs[0])||isNaN(this.inputs[1])?`(${t[0]} * ( ( ${t[0]} > ${t[1]} ) | 0 ) )`:t[0]*(t[0]>t[1]|0)}};t.exports=((e,t)=>{let s=Object.create(i);return s.inputs=[e,t],s})},{"./gen.js":30}],34:[function(e,t,s){"use strict";let n=e("./gen.js");t.exports=((e=0)=>{let t={inputs:[e],memory:{value:{length:1,idx:null}},recorder:null,in(s){if(n.histories.has(s)){let e=n.histories.get(s);return t.name=e.name,e}let i={gen(){let a=n.getInputs(t);null===t.memory.value.idx&&(n.requestMemory(t.memory),n.memory.heap[t.memory.value.idx]=e);let r=t.memory.value.idx;return n.addToEndBlock("memory[ "+r+" ] = "+a[0]),n.histories.set(s,i),a[0]},name:t.name+"_in"+n.getUID(),memory:t.memory};return this.inputs[0]=s,t.recorder=i,i},out:{gen:()=>(null===t.memory.value.idx&&(void 0===n.histories.get(t.inputs[0])&&n.histories.set(t.inputs[0],t.recorder),n.requestMemory(t.memory),n.memory.heap[t.memory.value.idx]=parseFloat(e)),"memory[ "+t.memory.value.idx+" ] ")},uid:n.getUID()};return t.out.memory=t.memory,t.name="history"+t.uid,t.out.name=t.name+"_out",t.in._name=t.name="_in",Object.defineProperty(t,"value",{get(){if(null!==this.memory.value.idx)return n.memory.heap[this.memory.value.idx]},set(e){null!==this.memory.value.idx&&(n.memory.heap[this.memory.value.idx]=e)}}),t})},{"./gen.js":30}],35:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"ifelse",gen(){let e=this.inputs[0],t=n.getInput(e[e.length-1]),s=`  var ${this.name}_out = ${t}\n`;for(let t=0;t<e.length-2;t+=2){let i,a,r,o=t===e.length-3,u=n.getInput(e[t]),l=e[t+1];"number"==typeof l?(i=l,a=null):void 0===n.memo[l.name]?(n.startLocalize(),n.getInput(l),a=(i=n.endLocalize())[0],i="  "+(i=i[1].join("")).replace(/\n/gi,"\n  ")):(i="",a=n.memo[l.name]),r=null===a?`  ${this.name}_out = ${i}`:`${i}  ${this.name}_out = ${a}`,0===t&&(s+=" "),s+=` if( ${u} === 1 ) {\n${r}\n  }`,s+=o?"\n":" else"}return n.memo[this.name]=`${this.name}_out`,[`${this.name}_out`,s]}};t.exports=((...e)=>{let t=Object.create(i),s=Array.isArray(e[0])?e[0]:e;return Object.assign(t,{uid:n.getUID(),inputs:[s]}),t.name=`${t.basename}${t.uid}`,t})},{"./gen.js":30}],36:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"in",gen(){const e="worklet"===n.mode;return e?n.inputs.add(this):n.parameters.add(this.name),n.memo[this.name]=e?this.name+"[i]":this.name,this.name}};t.exports=((e,t=0,s=0,a=0,r=0,o=1)=>{let u=Object.create(i);return u.id=n.getUID(),u.name=void 0!==e?e:`${u.basename}${u.id}`,Object.assign(u,{defaultValue:a,min:r,max:o,inputNumber:t,channelNumber:s}),u[0]={gen:()=>(n.parameters.has(u.name)||n.parameters.add(u.name),u.name+"[0]")},u[1]={gen:()=>(n.parameters.has(u.name)||n.parameters.add(u.name),u.name+"[1]")},u})},{"./gen.js":30}],37:[function(e,t,s){"use strict";const n={export(e){e===window&&(e.ssd=n.history,e.input=n.in,e.ternary=n.switch,delete n.history,delete n.in,delete n.switch),Object.assign(e,n),Object.defineProperty(n,"samplerate",{get:()=>n.gen.samplerate,set(e){}}),n.in=e.input,n.history=e.ssd,n.switch=e.ternary,e.clip=n.clamp},gen:e("./gen.js"),abs:e("./abs.js"),round:e("./round.js"),param:e("./param.js"),add:e("./add.js"),sub:e("./sub.js"),mul:e("./mul.js"),div:e("./div.js"),accum:e("./accum.js"),counter:e("./counter.js"),sin:e("./sin.js"),cos:e("./cos.js"),tan:e("./tan.js"),tanh:e("./tanh.js"),asin:e("./asin.js"),acos:e("./acos.js"),atan:e("./atan.js"),phasor:e("./phasor.js"),data:e("./data.js"),peek:e("./peek.js"),cycle:e("./cycle.js"),history:e("./history.js"),delta:e("./delta.js"),floor:e("./floor.js"),ceil:e("./ceil.js"),min:e("./min.js"),max:e("./max.js"),sign:e("./sign.js"),dcblock:e("./dcblock.js"),memo:e("./memo.js"),rate:e("./rate.js"),wrap:e("./wrap.js"),mix:e("./mix.js"),clamp:e("./clamp.js"),poke:e("./poke.js"),delay:e("./delay.js"),fold:e("./fold.js"),mod:e("./mod.js"),sah:e("./sah.js"),noise:e("./noise.js"),not:e("./not.js"),gt:e("./gt.js"),gte:e("./gte.js"),lt:e("./lt.js"),lte:e("./lte.js"),bool:e("./bool.js"),gate:e("./gate.js"),train:e("./train.js"),slide:e("./slide.js"),in:e("./in.js"),t60:e("./t60.js"),mtof:e("./mtof.js"),ltp:e("./ltp.js"),gtp:e("./gtp.js"),switch:e("./switch.js"),mstosamps:e("./mstosamps.js"),selector:e("./selector.js"),utilities:e("./utilities.js"),pow:e("./pow.js"),attack:e("./attack.js"),decay:e("./decay.js"),windows:e("./windows.js"),env:e("./env.js"),ad:e("./ad.js"),adsr:e("./adsr.js"),ifelse:e("./ifelseif.js"),bang:e("./bang.js"),and:e("./and.js"),pan:e("./pan.js"),eq:e("./eq.js"),neq:e("./neq.js"),exp:e("./exp.js"),seq:e("./seq.js")};n.gen.lib=n,t.exports=n},{"./abs.js":1,"./accum.js":2,"./acos.js":3,"./ad.js":4,"./add.js":5,"./adsr.js":6,"./and.js":7,"./asin.js":8,"./atan.js":9,"./attack.js":10,"./bang.js":11,"./bool.js":12,"./ceil.js":13,"./clamp.js":14,"./cos.js":15,"./counter.js":16,"./cycle.js":17,"./data.js":18,"./dcblock.js":19,"./decay.js":20,"./delay.js":21,"./delta.js":22,"./div.js":23,"./env.js":24,"./eq.js":25,"./exp.js":26,"./floor.js":27,"./fold.js":28,"./gate.js":29,"./gen.js":30,"./gt.js":31,"./gte.js":32,"./gtp.js":33,"./history.js":34,"./ifelseif.js":35,"./in.js":36,"./lt.js":38,"./lte.js":39,"./ltp.js":40,"./max.js":41,"./memo.js":42,"./min.js":43,"./mix.js":44,"./mod.js":45,"./mstosamps.js":46,"./mtof.js":47,"./mul.js":48,"./neq.js":49,"./noise.js":50,"./not.js":51,"./pan.js":52,"./param.js":53,"./peek.js":54,"./phasor.js":55,"./poke.js":56,"./pow.js":57,"./rate.js":58,"./round.js":59,"./sah.js":60,"./selector.js":61,"./seq.js":62,"./sign.js":63,"./sin.js":64,"./slide.js":65,"./sub.js":66,"./switch.js":67,"./t60.js":68,"./tan.js":69,"./tanh.js":70,"./train.js":71,"./utilities.js":72,"./windows.js":73,"./wrap.js":74}],38:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"lt",gen(){let e,t=n.getInputs(this);return e=`  var ${this.name} = `,isNaN(this.inputs[0])||isNaN(this.inputs[1])?e+=`(( ${t[0]} < ${t[1]}) | 0  )`:e+=t[0]<t[1]?1:0,e+="\n",n.memo[this.name]=this.name,[this.name,e]}};t.exports=((e,t)=>{let s=Object.create(i);return s.inputs=[e,t],s.name=s.basename+n.getUID(),s})},{"./gen.js":30}],39:[function(e,t,s){"use strict";let n=e("./gen.js"),i={name:"lte",gen(){let e,t=n.getInputs(this);return e=`  var ${this.name} = `,isNaN(this.inputs[0])||isNaN(this.inputs[1])?e+=`( ${t[0]} <= ${t[1]} | 0  )`:e+=t[0]<=t[1]?1:0,e+="\n",n.memo[this.name]=this.name,[this.name,e]}};t.exports=((e,t)=>{let s=Object.create(i);return s.inputs=[e,t],s.name="lte"+n.getUID(),s})},{"./gen.js":30}],40:[function(e,t,s){"use strict";let n=e("./gen.js"),i={name:"ltp",gen(){let e,t=n.getInputs(this);return e=isNaN(this.inputs[0])||isNaN(this.inputs[1])?`(${t[0]} * (( ${t[0]} < ${t[1]} ) | 0 ) )`:t[0]*(t[0]<t[1]|0)}};t.exports=((e,t)=>{let s=Object.create(i);return s.inputs=[e,t],s})},{"./gen.js":30}],41:[function(e,t,s){"use strict";let n=e("./gen.js"),i={name:"max",gen(){let e,t=n.getInputs(this);const s="worklet"===n.mode,i=s?"":"gen.";return isNaN(t[0])||isNaN(t[1])?(n.closures.add({[this.name]:s?"Math.max":Math.max}),e=`${i}max( ${t[0]}, ${t[1]} )`):e=Math.max(parseFloat(t[0]),parseFloat(t[1])),e}};t.exports=((e,t)=>{let s=Object.create(i);return s.inputs=[e,t],s})},{"./gen.js":30}],42:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"memo",gen(){let e,t=n.getInputs(this);return e=`  var ${this.name} = ${t[0]}\n`,n.memo[this.name]=this.name,[this.name,e]}};t.exports=((e,t)=>{let s=Object.create(i);return s.inputs=[e],s.id=n.getUID(),s.name=void 0!==t?t+"_"+n.getUID():`${s.basename}${s.id}`,s})},{"./gen.js":30}],43:[function(e,t,s){"use strict";let n=e("./gen.js"),i={name:"min",gen(){let e,t=n.getInputs(this);const s="worklet"===n.mode,i=s?"":"gen.";return isNaN(t[0])||isNaN(t[1])?(n.closures.add({[this.name]:s?"Math.min":Math.min}),e=`${i}min( ${t[0]}, ${t[1]} )`):e=Math.min(parseFloat(t[0]),parseFloat(t[1])),e}};t.exports=((e,t)=>{let s=Object.create(i);return s.inputs=[e,t],s})},{"./gen.js":30}],44:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./add.js"),a=e("./mul.js"),r=e("./sub.js"),o=e("./memo.js");t.exports=((e,t,s=.5)=>{let u=o(i(a(e,r(1,s)),a(t,s)));return u.name="mix"+n.getUID(),u})},{"./add.js":5,"./gen.js":30,"./memo.js":42,"./mul.js":48,"./sub.js":66}],45:[function(e,t,s){"use strict";let n=e("./gen.js");t.exports=((...e)=>{return{id:n.getUID(),inputs:e,gen(){let e=n.getInputs(this),t="(",s=e[0],i=isNaN(s);return e.forEach((n,a)=>{if(0===a)return;let r=isNaN(n),o=a===e.length-1;t+=i||r?`${s} % ${n}`:s%=n,o||(t+=" % ")}),t+=")"}}})},{"./gen.js":30}],46:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"mstosamps",gen(){let e,t,s=n.getInputs(this);return isNaN(s[0])?(e=`  var ${this.name} = ${n.samplerate} / 1000 * ${s[0]} \n\n`,n.memo[this.name]=e,t=[this.name,e]):t=e=n.samplerate/1e3*this.inputs[0],t}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t.name=i.basename+n.getUID(),t})},{"./gen.js":30}],47:[function(e,t,s){"use strict";let n=e("./gen.js"),i={name:"mtof",gen(){let e,t=n.getInputs(this);return isNaN(t[0])?(n.closures.add({[this.name]:Math.exp}),e=`( ${this.tuning} * gen.exp( .057762265 * (${t[0]} - 69) ) )`):e=this.tuning*Math.exp(.057762265*(t[0]-69)),e}};t.exports=((e,t)=>{let s=Object.create(i);return void 0!==t&&Object.assign(t.defaults),Object.assign(s,{tuning:440}),s.inputs=[e],s})},{"./gen.js":30}],48:[function(e,t,s){"use strict";const n=e("./gen.js"),i={basename:"mul",gen(){let e=n.getInputs(this),t=`  var ${this.name} = `,s=1,i=0,a=!1,r=!0;return e.forEach((n,o)=>{isNaN(n)?(t+=n,o<e.length-1&&(a=!0,t+=" * "),r=!1):(0===o?s=n:s*=parseFloat(n),i++)}),i>0&&(t+=a||r?s:" * "+s),t+="\n",n.memo[this.name]=this.name,[this.name,t]}};t.exports=((...e)=>{const t=Object.create(i);return Object.assign(t,{id:n.getUID(),inputs:e}),t.name=t.basename+t.id,t})},{"./gen.js":30}],49:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"neq",gen(){let e,t=n.getInputs(this);return e=`  var ${this.name} = (${t[0]} !== ${t[1]}) | 0\n\n`,n.memo[this.name]=this.name,[this.name,e]}};t.exports=((e,t)=>{let s=Object.create(i);return Object.assign(s,{uid:n.getUID(),inputs:[e,t]}),s.name=`${s.basename}${s.uid}`,s})},{"./gen.js":30}],50:[function(e,t,s){"use strict";let n=e("./gen.js"),i={name:"noise",gen(){let e;const t="worklet"===n.mode,s=t?"":"gen.";return n.closures.add({noise:t?"Math.random":Math.random}),e=`  var ${this.name} = ${s}noise()\n`,n.memo[this.name]=this.name,[this.name,e]}};t.exports=(e=>{let t=Object.create(i);return t.name=i.name+n.getUID(),t})},{"./gen.js":30}],51:[function(e,t,s){"use strict";let n=e("./gen.js"),i={name:"not",gen(){let e,t=n.getInputs(this);return e=isNaN(this.inputs[0])?`( ${t[0]} === 0 ? 1 : 0 )`:0===!t[0]?1:0}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t})},{"./gen.js":30}],52:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./data.js"),a=e("./peek.js"),r=e("./mul.js"),o={basename:"pan",initTable(){let e=new Float32Array(1024),t=new Float32Array(1024);const s=Math.PI/180;for(let n=0;n<1024;n++){let i=n*(90/1024);e[n]=Math.cos(i*s),t[n]=Math.sin(i*s)}n.globals.panL=i(e,1,{immutable:!0}),n.globals.panR=i(t,1,{immutable:!0})}};t.exports=((e,t,s=.5,i)=>{void 0===n.globals.panL&&o.initTable();let u=Object.create(o);return Object.assign(u,{uid:n.getUID(),inputs:[e,t],left:r(e,a(n.globals.panL,s,{boundmode:"clamp"})),right:r(t,a(n.globals.panR,s,{boundmode:"clamp"}))}),u.name=`${u.basename}${u.uid}`,u})},{"./data.js":18,"./gen.js":30,"./mul.js":48,"./peek.js":54}],53:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"param",gen(){n.requestMemory(this.memory),n.params.add(this);const e="worklet"===n.mode;return e&&n.parameters.add(this.name),this.value=this.initialValue,n.memo[this.name]=e?this.name+"[i]":`memory[${this.memory.value.idx}]`,n.memo[this.name]}};t.exports=((e=0,t=0,s=0,a=1)=>{let r=Object.create(i);return"string"!=typeof e?(r.name=r.basename+n.getUID(),r.initialValue=e):(r.name=e,r.initialValue=t),r.min=s,r.max=a,r.waapi=null,r.isWorklet="worklet"===n.mode,Object.defineProperty(r,"value",{get(){if(null!==this.memory.value.idx)return n.memory.heap[this.memory.value.idx]},set(e){null!==this.memory.value.idx&&(this.isWorklet&&null!==this.waapi?this.waapi.value=e:n.memory.heap[this.memory.value.idx]=e)}}),r.memory={value:{length:1,idx:null}},r})},{"./gen.js":30}],54:[function(e,t,s){"use strict";const n=e("./gen.js");e("./data.js");let i={basename:"peek",gen(){this.name;let e,t,s,i,a=n.getInputs(this);return i=a[1],s=(0|Math.log2(this.data.buffer.length))===Math.log2(this.data.buffer.length),"simple"===this.mode?e=`memory[ ${i} + ${a[0]} ]`:(e=`  var ${this.name}_dataIdx  = ${i}, \n      ${this.name}_phase = ${"samples"===this.mode?a[0]:a[0]+" * "+this.data.buffer.length}, \n      ${this.name}_index = ${this.name}_phase | 0,\n`,t="wrap"===this.boundmode?s?`( ${this.name}_index + 1 ) & (${this.data.buffer.length} - 1)`:`${this.name}_index + 1 >= ${this.data.buffer.length} ? ${this.name}_index + 1 - ${this.data.buffer.length} : ${this.name}_index + 1`:"clamp"===this.boundmode?`${this.name}_index + 1 >= ${this.data.buffer.length-1} ? ${this.data.buffer.length-1} : ${this.name}_index + 1`:"fold"===this.boundmode||"mirror"===this.boundmode?`${this.name}_index + 1 >= ${this.data.buffer.length-1} ? ${this.name}_index - ${this.data.buffer.length-1} : ${this.name}_index + 1`:`${this.name}_index + 1`,"linear"===this.interp?(e+=`      ${this.name}_frac  = ${this.name}_phase - ${this.name}_index,\n      ${this.name}_base  = memory[ ${this.name}_dataIdx +  ${this.name}_index ],\n      ${this.name}_next  = ${t},`,"ignore"===this.boundmode?e+=`\n      ${this.name}_out   = ${this.name}_index >= ${this.data.buffer.length-1} || ${this.name}_index < 0 ? 0 : ${this.name}_base + ${this.name}_frac * ( memory[ ${this.name}_dataIdx + ${this.name}_next ] - ${this.name}_base )\n\n`:e+=`\n      ${this.name}_out   = ${this.name}_base + ${this.name}_frac * ( memory[ ${this.name}_dataIdx + ${this.name}_next ] - ${this.name}_base )\n\n`):e+=`      ${this.name}_out = memory[ ${this.name}_dataIdx + ${this.name}_index ]\n\n`,n.memo[this.name]=this.name+"_out",[this.name+"_out",e])},defaults:{channels:1,mode:"phase",interp:"linear",boundmode:"wrap"}};t.exports=((e,t=0,s)=>{let a=Object.create(i);const r=void 0===e.basename?n.lib.data(e):e;return Object.assign(a,{data:r,dataName:r.name,uid:n.getUID(),inputs:[t,r]},i.defaults,s),a.name=a.basename+a.uid,a})},{"./data.js":18,"./gen.js":30}],55:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./accum.js"),a=e("./mul.js"),r="phasor",o=e("./div.js");const u={min:-1,max:1};t.exports=((e=1,t=0,s)=>{const l=Object.assign({},u,s),c=l.max-l.min,m=i("number"==typeof e?e*c/n.samplerate:o(a(e,c),n.samplerate),t,l);return m.name=r+n.getUID(),m})},{"./accum.js":2,"./div.js":23,"./gen.js":30,"./mul.js":48}],56:[function(e,t,s){"use strict";let n=e("./gen.js"),i=(e("./mul.js"),e("./wrap.js"),{basename:"poke",gen(){let e,t=n.getInputs(this);e=this.data.gen();let s=0===this.inputs[1]?`  memory[ ${e} ] = ${t[0]}\n`:`  memory[ ${e} + ${t[1]} ] = ${t[0]}\n`;if(void 0!==this.inline)return[this.inline,s];n.functionBody+=s}});t.exports=((e,t,s,a)=>{let r=Object.create(i),o={channels:1};return void 0!==a&&Object.assign(o,a),Object.assign(r,{data:e,dataName:e.name,dataLength:e.buffer.length,uid:n.getUID(),inputs:[t,s]},o),r.name=r.basename+r.uid,n.histories.set(r.name,r),r})},{"./gen.js":30,"./mul.js":48,"./wrap.js":74}],57:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"pow",gen(){let e,t=n.getInputs(this);const s="worklet"===n.mode,i=s?"":"gen.";return isNaN(t[0])||isNaN(t[1])?(n.closures.add({pow:s?"Math.pow":Math.pow}),e=`${i}pow( ${t[0]}, ${t[1]} )`):("string"==typeof t[0]&&"("===t[0][0]&&(t[0]=t[0].slice(1,-1)),"string"==typeof t[1]&&"("===t[1][0]&&(t[1]=t[1].slice(1,-1)),e=Math.pow(parseFloat(t[0]),parseFloat(t[1]))),e}};t.exports=((e,t)=>{let s=Object.create(i);return s.inputs=[e,t],s.id=n.getUID(),s.name=`${s.basename}{pow.id}`,s})},{"./gen.js":30}],58:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./history.js"),a=(e("./sub.js"),e("./add.js"),e("./mul.js"),e("./memo.js"),e("./delta.js"),e("./wrap.js"),{basename:"rate",gen(){let e,t=n.getInputs(this),s=(i(),i(),"gen."+this.name);return n.closures.add({[this.name]:this}),[s+".phase",e=" "+(e=` var ${this.name}_diff = ${t[0]} - ${s}.lastSample\n  if( ${this.name}_diff < -.5 ) ${this.name}_diff += 1\n  ${s}.phase += ${this.name}_diff * ${t[1]}\n  if( ${s}.phase > 1 ) ${s}.phase -= 1\n  ${s}.lastSample = ${t[0]}\n`)]}});t.exports=((e,t)=>{let s=Object.create(a);return Object.assign(s,{phase:0,lastSample:0,uid:n.getUID(),inputs:[e,t]}),s.name=`${s.basename}${s.uid}`,s})},{"./add.js":5,"./delta.js":22,"./gen.js":30,"./history.js":34,"./memo.js":42,"./mul.js":48,"./sub.js":66,"./wrap.js":74}],59:[function(e,t,s){"use strict";let n=e("./gen.js"),i={name:"round",gen(){let e,t=n.getInputs(this);const s="worklet"===n.mode,i=s?"":"gen.";return isNaN(t[0])?(n.closures.add({[this.name]:s?"Math.round":Math.round}),e=`${i}round( ${t[0]} )`):e=Math.round(parseFloat(t[0])),e}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t})},{"./gen.js":30}],60:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"sah",gen(){let e,t=n.getInputs(this);return n.requestMemory(this.memory),e=` var ${this.name}_control = memory[${this.memory.control.idx}],\n      ${this.name}_trigger = ${t[1]} > ${t[2]} ? 1 : 0\n\n  if( ${this.name}_trigger !== ${this.name}_control  ) {\n    if( ${this.name}_trigger === 1 ) \n      memory[${this.memory.value.idx}] = ${t[0]}\n    \n    memory[${this.memory.control.idx}] = ${this.name}_trigger\n  }\n`,n.memo[this.name]=`memory[${this.memory.value.idx}]`,[`memory[${this.memory.value.idx}]`," "+e]}};t.exports=((e,t,s=0,a)=>{let r=Object.create(i),o={init:0};return void 0!==a&&Object.assign(o,a),Object.assign(r,{lastSample:0,uid:n.getUID(),inputs:[e,t,s],memory:{control:{idx:null,length:1},value:{idx:null,length:1}}},o),r.name=`${r.basename}${r.uid}`,r})},{"./gen.js":30}],61:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"selector",gen(){let e,t=n.getInputs(this),s=0;switch(t.length){case 2:s=t[1];break;case 3:e=`  var ${this.name}_out = ${t[0]} === 1 ? ${t[1]} : ${t[2]}\n\n`,s=[this.name+"_out",e];break;default:e=` var ${this.name}_out = 0\n  switch( ${t[0]} + 1 ) {\n`;for(let s=1;s<t.length;s++)e+=`    case ${s}: ${this.name}_out = ${t[s]}; break;\n`;e+="  }\n\n",s=[this.name+"_out"," "+e]}return n.memo[this.name]=this.name+"_out",s}};t.exports=((...e)=>{let t=Object.create(i);return Object.assign(t,{uid:n.getUID(),inputs:e}),t.name=`${t.basename}${t.uid}`,t})},{"./gen.js":30}],62:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./accum.js"),a=e("./counter.js"),r=e("./peek.js"),o=e("./history.js"),u=e("./data.js"),l="seq";t.exports=((e=11025,t=[0,1],s=1)=>{let c;if(Array.isArray(e)){const t=a(0,0,e.length),n=r(u(e),t,{mode:"simple"});c=a(s,0,n);const i=o();i.in(c.wrap),t.inputs[0]=i.out}else c=a(s,0,e);const m=i(c.wrap,0,{min:0,max:t.length}),d=r(u(t),m,{mode:"simple"});return d.name=l+n.getUID(),d})},{"./accum.js":2,"./counter.js":16,"./data.js":18,"./gen.js":30,"./history.js":34,"./peek.js":54}],63:[function(e,t,s){"use strict";let n=e("./gen.js"),i={name:"sign",gen(){let e,t=n.getInputs(this);const s="worklet"===n.mode,i=s?"":"gen.";return isNaN(t[0])?(n.closures.add({[this.name]:s?"Math.sign":Math.sign}),e=`${i}sign( ${t[0]} )`):e=Math.sign(parseFloat(t[0])),e}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t})},{"./gen.js":30}],64:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"sin",gen(){let e,t=n.getInputs(this);const s="worklet"===n.mode,i=s?"":"gen.";return isNaN(t[0])?(n.closures.add({sin:s?"Math.sin":Math.sin}),e=`${i}sin( ${t[0]} )`):e=Math.sin(parseFloat(t[0])),e}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t.id=n.getUID(),t.name=`${t.basename}{sin.id}`,t})},{"./gen.js":30}],65:[function(e,t,s){"use strict";e("./gen.js");let n=e("./history.js"),i=e("./sub.js"),a=e("./add.js"),r=(e("./mul.js"),e("./memo.js")),o=e("./gt.js"),u=e("./div.js"),l=e("./switch.js");t.exports=((e,t=1,s=1)=>{let c,m,d=n(0);return m=l(o(e,d.out),t,s),c=r(a(d.out,u(i(e,d.out),m))),d.in(c),c})},{"./add.js":5,"./div.js":23,"./gen.js":30,"./gt.js":31,"./history.js":34,"./memo.js":42,"./mul.js":48,"./sub.js":66,"./switch.js":67}],66:[function(e,t,s){"use strict";const n=e("./gen.js"),i={basename:"sub",gen(){let e=n.getInputs(this),t=0,s=!1,i=e[0],a=isNaN(i),r=!1,o=0;return this.inputs.forEach(e=>{isNaN(e)&&(r=!0)}),t="  var "+this.name+" = ",e.forEach((n,r)=>{if(0===r)return;let o=isNaN(n),u=r===e.length-1;a||o?(s=!0,t+=`${i} - ${n}`,u||(t+=" - ")):t+=i-=n}),t+="\n",o=[this.name,t],n.memo[this.name]=this.name,o}};t.exports=((...e)=>{let t=Object.create(i);return Object.assign(t,{id:n.getUID(),inputs:e}),t.name="sub"+t.id,t})},{"./gen.js":30}],67:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"switch",gen(){let e,t=n.getInputs(this);return t[1]===t[2]?t[1]:(e=`  var ${this.name}_out = ${t[0]} === 1 ? ${t[1]} : ${t[2]}\n`,n.memo[this.name]=`${this.name}_out`,[`${this.name}_out`,e])}};t.exports=((e,t=1,s=0)=>{let a=Object.create(i);return Object.assign(a,{uid:n.getUID(),inputs:[e,t,s]}),a.name=`${a.basename}${a.uid}`,a})},{"./gen.js":30}],68:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"t60",gen(){let e,t,s=n.getInputs(this);const i="worklet"===n.mode,a=i?"":"gen.";return isNaN(s[0])?(n.closures.add({exp:i?"Math.exp":Math.exp}),e=`  var ${this.name} = ${a}exp( -6.907755278921 / ${s[0]} )\n\n`,n.memo[this.name]=e,t=[this.name,e]):t=e=Math.exp(-6.907755278921/s[0]),t}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t.name=i.basename+n.getUID(),t})},{"./gen.js":30}],69:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"tan",gen(){let e,t=n.getInputs(this);const s="worklet"===n.mode,i=s?"":"gen.";return isNaN(t[0])?(n.closures.add({tan:s?"Math.tan":Math.tan}),e=`${i}tan( ${t[0]} )`):e=Math.tan(parseFloat(t[0])),e}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t.id=n.getUID(),t.name=`${t.basename}{tan.id}`,t})},{"./gen.js":30}],70:[function(e,t,s){"use strict";let n=e("./gen.js"),i={basename:"tanh",gen(){let e,t=n.getInputs(this);const s="worklet"===n.mode,i=s?"":"gen.";return isNaN(t[0])?(n.closures.add({tanh:s?"Math.tan":Math.tanh}),e=`${i}tanh( ${t[0]} )`):e=Math.tanh(parseFloat(t[0])),e}};t.exports=(e=>{let t=Object.create(i);return t.inputs=[e],t.id=n.getUID(),t.name=`${t.basename}{tanh.id}`,t})},{"./gen.js":30}],71:[function(e,t,s){"use strict";let n=e("./gen.js"),i=e("./lt.js");e("./phasor.js");t.exports=((e=440,t=.5)=>{let s=i(accum(div(e,44100)),.5);return s.name=`train${n.getUID()}`,s})},{"./gen.js":30,"./lt.js":38,"./phasor.js":55}],72:[function(e,t,s){"use strict";let n=e("./gen.js"),i=(e("./data.js"),{ctx:null,clear(){void 0!==this.workletNode?this.workletNode.disconnect():this.callback=(()=>0),this.clear.callbacks.forEach(e=>e()),this.clear.callbacks.length=0},createContext(){let e="undefined"==typeof AudioContext?webkitAudioContext:AudioContext;this.ctx=new e,n.samplerate=this.ctx.sampleRate;let t=()=>{if(void 0!==e&&document&&document.documentElement&&"ontouchstart"in document.documentElement&&(window.removeEventListener("touchstart",t),"ontouchstart"in document.documentElement)){let e=i.ctx.createBufferSource();e.connect(i.ctx.destination),e.noteOn(0)}};return document&&document.documentElement&&"ontouchstart"in document.documentElement&&window.addEventListener("touchstart",t),this},createScriptProcessor(){return this.node=this.ctx.createScriptProcessor(1024,0,2),this.clearFunction=function(){return 0},void 0===this.callback&&(this.callback=this.clearFunction),this.node.onaudioprocess=function(e){for(var t=e.outputBuffer,s=t.getChannelData(0),n=t.getChannelData(1),a=i.isStereo,r=0;r<s.length;r++){var o=i.callback();!1===a?s[r]=n[r]=o:(s[r]=o[0],n[r]=o[1])}},this.node.connect(this.ctx.destination),this},prettyPrintCallback:e=>e.toString().split("\n").slice(3,-2).map(e=>"      "+e).join("\n"),createParameterDescriptors(e){let t="";for(let s of e.inputs.values())t+=`{ name:'${s.name}', defaultValue:${s.defaultValue}, minValue:${s.min}, maxValue:${s.max} },\n      `;return t},createParameterDereferences(e){let t=e.params.size>0?"\n      ":"";for(let s of e.params.values())t+=`const ${s.name} = parameters.${s.name}\n      `;return t},createParameterArguments(e){let t="";for(let s of e.params.values())t+=s.name+"[i],";return t=t.slice(0,-1)},createInputDereferences(e){let t=e.inputs.size>0?"\n":"";for(let s of e.inputs.values())t+=`const ${s.name} = inputs[ ${s.inputNumber} ][ ${s.channelNumber} ]\n      `;return t},createInputArguments(e){let t="";for(let s of e.inputs.values())t+=s.name+"[i],";return t=t.slice(0,-1)},createFunctionDereferences(e){let t=e.members.size>0?"\n":"",s={};for(let n of e.members.values()){const e=Object.keys(n)[0],i=n[e];void 0===s[e]&&(s[e]=!0,t+=`      const ${e} = ${i}\n`)}return t},createWorkletProcessor(e,t,s,i=441e3){const a=n.createCallback(e,i,s),r=a.inputs,o=this.createParameterDescriptors(a),u=this.createParameterDereferences(a),l=(this.createParameterArguments(a),this.createInputDereferences(a)),c=(this.createInputArguments(a),this.createFunctionDereferences(a)),m=!1===a.isStereo?"left[ i ] = memory[0]":"left[ i ] = memory[0];\n\t\tright[ i ] = memory[1]\n",d=`\nclass ${t}Processor extends AudioWorkletProcessor {\n\n  static get parameterDescriptors() {\n    const params = [\n      ${o}      \n    ]\n    return params\n  }\n \n  constructor( options ) {\n    super( options )\n    this.port.onmessage = this.handleMessage.bind( this )\n    this.initialized = false\n  }\n\n  handleMessage( event ) {\n    if( event.data.key === 'init' ) {\n      this.memory = event.data.memory\n      this.initialized = true\n    }else if( event.data.key === 'set' ) {\n      this.memory[ event.data.idx ] = event.data.value\n    }else if( event.data.key === 'get' ) {\n      this.port.postMessage({ key:'return', idx:event.data.idx, value:this.memory[event.data.idx] })     \n    }\n  }\n\n  process( inputs, outputs, parameters ) {\n    if( this.initialized === true ) {\n      const output = outputs[0]\n      const left   = output[ 0 ]\n      const right  = output[ 1 ]\n      const len    = left.length\n      const memory = this.memory ${u}${l}${c}\n\n      for( let i = 0; i < len; ++i ) {\n        ${this.prettyPrintCallback(a)}\n        ${m}\n      }\n    }\n    return true\n  }\n}\n    \nregisterProcessor( '${t}', ${t}Processor)`;return!0===s&&console.log(d),[window.URL.createObjectURL(new Blob([d],{type:"text/javascript"})),d,r,a.params,a.isStereo]},registeredForNodeAssignment:[],register(e){-1===this.registeredForNodeAssignment.indexOf(e)&&this.registeredForNodeAssignment.push(e)},playWorklet(e,t,s=!1,a=441e3){i.clear();const[r,o,u,l,c]=i.createWorkletProcessor(e,t,s,a);return new Promise((e,s)=>{i.ctx.audioWorklet.addModule(r).then(()=>{const s=new AudioWorkletNode(i.ctx,t,{outputChannelCount:[c?2:1]});s.connect(i.ctx.destination),s.callbacks={},s.onmessage=function(e){"return"===e.data.message&&(s.callbacks[e.data.idx](e.data.value),delete s.callbacks[e.data.idx])},s.getMemoryValue=function(e,t){this.workletCallbacks[e]=t,this.workletNode.port.postMessage({key:"get",idx:e})},s.port.postMessage({key:"init",memory:n.memory.heap}),i.workletNode=s,i.registeredForNodeAssignment.forEach(e=>e.node=s),i.registeredForNodeAssignment.length=0;for(let e of u.values()){const t=Object.keys(e)[0],n=s.parameters.get(t);Object.defineProperty(s,t,{set(e){n.value=e},get:()=>n.value})}for(let e of l.values()){const t=e.name,n=s.parameters.get(t);e.waapi=n,Object.defineProperty(s,t,{set(e){n.value=e},get:()=>n.value})}i.console&&i.console.setValue(o),e(s)})})},playGraph(e,t,s=441e3,a=Float32Array){return i.clear(),void 0===t&&(t=!1),this.isStereo=Array.isArray(e),i.callback=n.createCallback(e,s,t,!1,a),i.console&&i.console.setValue(i.callback.toString()),i.callback},loadSample(e,t){let s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="arraybuffer";let n=new Promise((e,n)=>{s.onload=function(){var n=s.response;i.ctx.decodeAudioData(n,s=>{t.buffer=s.getChannelData(0),e(t.buffer)})}});return s.send(),n}});i.clear.callbacks=[],t.exports=i},{"./data.js":18,"./gen.js":30}],73:[function(e,t,s){"use strict";const n=t.exports={bartlett:(e,t)=>2/(e-1)*((e-1)/2-Math.abs(t-(e-1)/2)),bartlettHann:(e,t)=>.62-.48*Math.abs(t/(e-1)-.5)-.38*Math.cos(2*Math.PI*t/(e-1)),blackman(e,t,s){let n=s/2;return(1-s)/2-.5*Math.cos(2*Math.PI*t/(e-1))+n*Math.cos(4*Math.PI*t/(e-1))},cosine:(e,t)=>Math.cos(Math.PI*t/(e-1)-Math.PI/2),gauss:(e,t,s)=>Math.pow(Math.E,-.5*Math.pow((t-(e-1)/2)/(s*(e-1)/2),2)),hamming:(e,t)=>.54-.46*Math.cos(2*Math.PI*t/(e-1)),hann:(e,t)=>.5*(1-Math.cos(2*Math.PI*t/(e-1))),lanczos(e,t){let s=2*t/(e-1)-1;return Math.sin(Math.PI*s)/(Math.PI*s)},rectangular:(e,t)=>1,triangular:(e,t)=>2/e*(e/2-Math.abs(t-(e-1)/2)),welch(e,t,s,n=0){const i=0===n?t:(t+Math.floor(n*e))%e,a=(e-1)/2;return 1-Math.pow((i-a)/a,2)},inversewelch(e,t,s,n=0){let i=0===n?t:(t+Math.floor(n*e))%e;const a=(e-1)/2;return Math.pow((i-a)/a,2)},parabola:(e,t)=>t<=e/2?n.inversewelch(e/2,t)-1:1-n.inversewelch(e/2,t-e/2),exponential:(e,t,s)=>Math.pow(t/e,s),linear:(e,t)=>t/e}},{}],74:[function(e,t,s){"use strict";let n=e("./gen.js"),i=(e("./floor.js"),e("./sub.js"),e("./memo.js"),{basename:"wrap",gen(){let e,t,s=n.getInputs(this),i=(s[0],s[1]),a=s[2];return t=0===this.min?a:isNaN(a)||isNaN(i)?`${a} - ${i}`:a-i,e=` var ${this.name} = ${s[0]}\n  if( ${this.name} < ${this.min} ) ${this.name} += ${t}\n  else if( ${this.name} > ${this.max} ) ${this.name} -= ${t}\n\n`,[this.name," "+e]}});t.exports=((e,t=0,s=1)=>{let a=Object.create(i);return Object.assign(a,{min:t,max:s,uid:n.getUID(),inputs:[e,t,s]}),a.name=`${a.basename}${a.uid}`,a})},{"./floor.js":27,"./gen.js":30,"./memo.js":42,"./sub.js":66}],75:[function(e,t,s){let n=e("../ugen.js"),i=Object.create(n);Object.assign(i,{__type__:"analyzer"}),t.exports=i},{"../ugen.js":135}],76:[function(e,t,s){t.exports=function(t){const s={SSD:e("./singlesampledelay.js")(t),Follow:e("./follow.js")(t),export:e=>{for(let t in s)"export"!==t&&(e[t]=s[t])}};return s}},{"./follow.js":77,"./singlesampledelay.js":78}],77:[function(e,t,s){const n=e("genish.js"),i=e("./analyzer.js"),a=e("../ugen.js"),r=n;t.exports=function(e){const t=s=>{const o=Object.create(i);o.in=Object.create(a),o.id=e.factory.getUID();const u=Object.assign({},s,t.defaults);let l,c=void 0===u.input.isStereo||u.input.isStereo;o.buffer=n.data(u.bufferSize,1);const m=n.in("input"),d=c?n.add(m[0],m[1]):m;{const e=n.accum(1,0,{max:u.bufferSize,min:0}),t=n.data(1,1,{meta:!0});t[0]=r.sub(r.add(t[0],d),n.peek(o.buffer,e,{mode:"simple"})),l=r.div(t[0],u.bufferSize)}if(!c){e.factory(o,l,"follow_out",u),o.callback.ugenName=o.ugenName=`follow_out_${o.id}`;let t=o.buffer.memory.values.idx,s=0,n=Math.abs,i=function(e,i){"use strict";return i[r.add(t,s)]=n(e),++s>r.sub(u.bufferSize,1)&&(s=0),0};e.factory(o.in,d,"follow_in",u,i),o.in.callback.ugenName=o.in.ugenName=`follow_in_${o.id}`,o.in.inputNames=["input"],o.in.inputs=[d],o.in.input=u.input,o.in.type="analysis",-1===e.analyzers.indexOf(o.in)&&e.analyzers.push(o.in),e.dirty(e.analyzers)}return o};return t.defaults={bufferSize:8192},t}},{"../ugen.js":135,"./analyzer.js":75,"genish.js":37}],78:[function(e,t,s){const n=e("genish.js"),i=e("./analyzer.js"),a=e("../workletProxy.js"),r=e("../ugen.js");t.exports=function(e){const t=s=>{let o=Object.create(i);o.__in=Object.create(r),o.__out=Object.create(r),o.id=e.factory.getUID();let u=Object.assign({},t.defaults,s),l=u.isStereo,c=n.in("input"),m=n.history();if(l){let t=n.history();e.factory(o.__out,[m.out,t.out],"ssd_out",u,null,!1),o.__out.callback.ugenName=o.__out.ugenName="ssd_out"+o.id;const s=o.__out.graph.memory.value.idx,i=s+1,a=e.genish.gen.memory.heap,r=function(e){"use strict";return a[s]=e[0],a[i]=e[1],0};e.factory(o.in,[c[0],c[1]],"ssd_in",u,r,!1),r.ugenName=o.in.ugenName="ssd_in_"+o.id,o.in.inputNames=["input"],o.in.inputs=[u.input],o.in.input=u.input,o.type="analysis",o.in.listen=function(t){void 0!==t&&(o.in.input=t,o.in.inputs=[t]),-1===e.analyzers.indexOf(o.in)&&e.analyzers.push(o.in),e.dirty(e.analyzers)}}else{e.factory(o.__out,m.out,"ssd_out",u,null,!1),o.__out.callback.ugenName=o.__out.ugenName="ssd_out"+o.id;let t=o.__out.graph.memory.value.idx,s=e.genish.gen.memory.heap,n=function(e){"use strict";return s[t]=e,0};e.factory(o.__in,c,"ssd_in",{},n,!1),n.ugenName=o.__in.ugenName="ssd_in_"+o.id,o.__in.inputNames=["input"],o.__in.inputs=[u.input],o.__in.input=u.input,o.type="analysis",o.__in.listen=function(t){void 0!==t&&(o.__in.input=t,o.__in.inputs=[t]),-1===e.analyzers.indexOf(o.__in)&&("worklet"===e.mode?e.analyzers.push({id:o.id,prop:"in"}):e.analyzers.push(o.__in)),e.dirty(e.analyzers)}}o.listen=o.__in.listen,o.__in.type="analysis",o.__out.inputs=[];const d=a(["analysis","SSD"],u,o);return Object.defineProperties(d,{out:{set(e){},get:()=>"worklet"===e.mode?{id:d.id,prop:"out"}:d.__out}}),d};return t.defaults={input:0,isStereo:!1},t}},{"../ugen.js":135,"../workletProxy.js":138,"./analyzer.js":75,"genish.js":37}],79:[function(e,t,s){const n=e("../ugen.js"),i=e("genish.js");t.exports=function(e){const t=function(s){const a=Object.create(n),r=i.in("attack"),o=i.in("decay"),u=Object.assign({},t.defaults,s),l=i.ad(r,o,{shape:u.shape,alpha:u.alpha});return a.trigger=l.trigger,e.factory(a,l,["envelopes","AD"],u)};return t.defaults={attack:44100,decay:44100,shape:"exponential",alpha:5},t}},{"../ugen.js":135,"genish.js":37}],80:[function(e,t,s){const n=e("../ugen.js"),i=e("genish.js");t.exports=function(e){const t=function(s){const a=Object.create(n),r=i.in("attack"),o=i.in("decay"),u=i.in("sustain"),l=i.in("release"),c=i.in("sustainLevel"),m=Object.assign({},t.defaults,s);Object.assign(a,m);const d=i.adsr(r,o,u,c,l,{triggerRelease:m.triggerRelease,shape:m.shape,alpha:m.alpha});return a.trigger=d.trigger,a.advance=d.release,e.factory(a,d,["envelopes","ADSR"],m)};return t.defaults={attack:22050,decay:22050,sustain:44100,sustainLevel:.6,release:44100,triggerRelease:!1,shape:"exponential",alpha:5},t}},{"../ugen.js":135,"genish.js":37}],81:[function(e,t,s){const n=e("genish.js");t.exports=function(t){const s={AD:e("./ad.js")(t),ADSR:e("./adsr.js")(t),Ramp:e("./ramp.js")(t),export:e=>{for(let t in s)"export"!==t&&"factory"!==t&&(e[t]=s[t])},factory(e,t,s,i,a,r,o,u=!1){let l;return l=1!=e?n.ad(s,i,{shape:t}):n.adsr(s,i,a,r,o,{shape:t,triggerRelease:u})}};return s}},{"./ad.js":79,"./adsr.js":80,"./ramp.js":82,"genish.js":37}],82:[function(e,t,s){const n=e("../ugen.js"),i=e("genish.js");t.exports=function(e){const t=function(s){const a=Object.create(n),r=i.in("length"),o=i.in("from"),u=i.in("to"),l=Object.assign({},t.defaults,s),c=i.bang(),m=i.accum(i.div(1,r),c,{shouldWrap:l.shouldLoop,shouldClamp:!0}),d=i.sub(u,o),h=i.add(o,i.mul(m,d));return a.trigger=c.trigger,e.factory(a,h,["envelopes","ramp"],l)};return t.defaults={from:0,to:1,length:i.gen.samplerate,shouldLoop:!1},t}},{"../ugen.js":135,"genish.js":37}],83:[function(e,t,s){let n=function(e){this.cmp=e||function(e,t){return e-t},this.length=0,this.data=[]};n.prototype.peek=function(){return this.data[0]},n.prototype.push=function(e){this.data.push(e);for(var t,s,n=this.data.length-1;n>0&&(t=n-1>>>1,this.cmp(this.data[n],this.data[t])<0);)s=this.data[t],this.data[t]=this.data[n],this.data[n]=s,n=t;return this.length++},n.prototype.pop=function(){var e=this.data.pop(),t=this.data[0];if(this.data.length>0){this.data[0]=e;for(var s,n,i,a,r=0,o=this.data.length-1;n=(s=1+(r<<1))+1,i=r,s<=o&&this.cmp(this.data[s],this.data[i])<0&&(i=s),n<=o&&this.cmp(this.data[n],this.data[i])<0&&(i=n),i!==r;)a=this.data[i],this.data[i]=this.data[r],this.data[r]=a,r=i}else t=e;return this.length--,t},t.exports=n},{}],84:[function(e,t,s){let n=e("genish.js");t.exports=function(e,t=500,s=.5){let i=n.counter(1,0,t),a=n.data(t),r=n.peek(a,i,{interp:"none",mode:"samples"}),o=n.memo(n.add(n.mul(-1,e),r));return n.poke(a,n.add(e,n.mul(r,s)),i),o}},{"genish.js":37}],85:[function(e,t,s){let n=e("genish.js"),i=e("./filter.js");t.exports=function(e){e.genish.biquad=((e,t,s,i,a)=>{let r,o,u,l,c,m,d,h,p,f,g,j,b,y,x,v,$;const _=n.memo(n.add(.5,n.mul(s,22)));let w=n.history(),k=n.history(),O=n.history(),M=n.history(),N=n.memo(n.mul(2*Math.PI,n.div(t,n.gen.samplerate))),I=n.sin(N),S=n.cos(N),P=n.memo(n.div(I,n.mul(2,_))),q=n.sub(1,S);switch(i){case 1:r=n.memo(n.div(n.add(1,S),2)),o=n.mul(n.add(1,S),-1),u=r,l=n.add(1,P),c=n.mul(-2,S),m=n.sub(1,P);break;case 2:r=n.mul(_,P),o=0,u=n.mul(r,-1),l=n.add(1,P),c=n.mul(-2,S),m=n.sub(1,P);break;default:o=q,u=r=n.memo(n.div(q,2)),l=n.add(1,P),c=n.mul(-2,S),m=n.sub(1,P)}r=n.div(r,l),o=n.div(o,l),u=n.div(u,l),c=n.div(c,l),m=n.div(m,l),d=n.mul(w.in(a?e[0]:e),r),h=n.mul(k.in(w.out),o),p=n.mul(k.out,u);let D=n.add(d,h,p);f=n.mul(M.in(O.out),c),g=n.mul(M.out,m);let U=n.add(f,g),A=n.sub(D,U);if(O.in(A),a){let t=n.history(),s=n.history(),i=n.history(),a=n.history();j=n.mul(t.in(e[1]),r),b=n.mul(s.in(t.out),o),y=n.mul(s.out,u);let l=n.add(j,b,y);x=n.mul(a.in(i.out),c),v=n.mul(a.out,m);let d=n.add(x,v),h=n.sub(l,d);i.in(h),$=[A,h]}else $=A;return $});let t=s=>{let a=Object.create(i),r=Object.assign({},t.defaults,s);Object.assign(a,r);let o=a.input.isStereo;return a.__createGraph=function(){a.graph=e.genish.biquad(n.in("input"),n.mul(n.in("cutoff"),n.gen.samplerate/4),n.in("Q"),a.mode,o)},a.__createGraph(),a.__requiresRecompilation=["mode"],e.factory(a,a.graph,["filters","Filter12Biquad"],r)};return t.defaults={input:0,Q:.15,cutoff:.05,mode:0},t}},{"./filter.js":88,"genish.js":37}],86:[function(e,t,s){let n=e("genish.js");t.exports=function(e,t,s=.2,i=.84){let a=n.history(),r=n.counter(1,0,t),o=n.data(t),u=n.peek(o,r,{interp:"none",mode:"samples"}),l=n.memo(n.add(n.mul(u,n.sub(1,s)),n.mul(a.out,s)));return a.in(l),n.poke(o,n.add(e,n.mul(l,i)),r),u}},{"genish.js":37}],87:[function(e,t,s){const n=e("genish.js"),i=e("./filter.js");t.exports=function(e){e.genish.diodeZDF=((e,t,s,i,a=!1)=>{const r=1/n.gen.samplerate,o=n.history(0),u=n.history(0),l=n.history(0),c=n.history(0);const m=n.memo(n.add(.5,n.mul(t,11))),d=n.memo(n.mul(2*Math.PI,s)),h=n.memo(n.mul(2/r,n.tan(n.mul(d,r/2)))),p=n.memo(n.mul(h,r/2)),f=n.memo(n.mul(.5,n.div(p,n.add(1,p)))),g=n.memo(n.mul(.5,n.div(p,n.sub(n.add(1,p),n.mul(n.mul(.5,p),f))))),j=n.memo(n.mul(.5,n.div(p,n.sub(n.add(1,p),n.mul(n.mul(.5,p),g))))),b=n.memo(n.div(p,n.sub(n.add(1,p),n.mul(p,j)))),y=n.memo(n.mul(n.mul(f,g),n.mul(j,b))),x=n.memo(n.mul(n.mul(f,g),j)),v=n.memo(n.mul(f,g)),$=f;const _=n.memo(n.div(p,n.add(1,p))),w=n.memo(n.div(1,n.sub(n.add(1,p),n.mul(p,j)))),k=n.memo(n.div(1,n.sub(n.add(1,p),n.mul(n.mul(.5,p),g)))),O=n.memo(n.div(1,n.sub(n.add(1,p),n.mul(n.mul(.5,p),f)))),M=n.memo(n.div(1,n.add(1,p))),N=n.memo(n.add(1,n.mul(b,j))),I=n.memo(n.add(1,n.mul(j,g))),S=n.memo(n.add(1,n.mul(g,f))),P=p,q=n.memo(n.mul(.5,p)),D=n.memo(n.mul(.5,p)),U=j,A=g,F=f,C=n.memo(n.mul(M,c.out)),z=n.memo(n.mul(O,n.add(l.out,n.mul(C,D)))),R=n.memo(n.mul(k,n.add(u.out,n.mul(z,q)))),E=n.memo(n.mul(w,n.add(o.out,n.mul(R,P)))),W=n.memo(n.mul(k,n.add(u.out,n.mul(z,q)))),V=n.memo(n.mul(O,n.add(l.out,n.mul(C,D)))),G=C,L=n.memo(n.add(n.add(n.mul(x,E),n.mul(v,W)),n.add(n.mul($,V),n.mul(1,G))));let B=e;B=n.tanh(n.mul(i,B));const T=n.div(n.sub(B,n.mul(m,L)),n.add(1,n.mul(m,y)));let Q=n.memo(n.add(n.add(n.mul(T,N),R),n.mul(U,E))),Z=n.memo(n.mul(n.sub(n.mul(1,Q),o.out),_)),J=n.add(Z,o.out);return o.in(n.add(J,Z)),Q=n.memo(n.add(n.add(n.mul(J,I),z),n.mul(A,W))),Z=n.memo(n.mul(n.sub(n.mul(.5,Q),u.out),_)),J=n.add(Z,u.out),u.in(n.add(J,Z)),Q=n.memo(n.add(n.add(n.mul(J,S),C),n.mul(F,V))),Z=n.memo(n.mul(n.sub(n.mul(.5,Q),l.out),_)),J=n.add(Z,l.out),l.in(n.add(J,Z)),Z=n.memo(n.mul(n.sub(n.mul(.5,Q),c.out),_)),J=n.add(Z,c.out),c.in(n.add(J,Z)),J});const t=s=>{const a=Object.create(i),r=Object.assign({},t.defaults,i.defaults,s),o=r.input.isStereo;return Object.assign(a,r),e.factory(a,e.genish.diodeZDF(n.in("input"),n.in("Q"),n.in("cutoff"),n.in("saturation"),o),["filters","Filter24TB303"],r)};return t.defaults={input:0,Q:.65,saturation:1,cutoff:880},t}},{"./filter.js":88,"genish.js":37}],88:[function(e,t,s){let n=e("../ugen.js"),i=Object.create(n);Object.assign(i,{defaults:{bypass:!1}}),t.exports=i},{"../ugen.js":135}],89:[function(e,t,s){let n=e("genish.js"),i=e("./filter.js");t.exports=function(e){e.genish.filter24=((e,t,s,i,a=!1)=>{let r,o=n.data([0,0,0,0],1,{meta:!0}),u=n.memo(n.mul(t,5)),l=n.memo(n.div(s,11025)),c=n.clamp(n.mul(o[3],u)),m=n.sub(a?e[0]:e,c);o[0]=n.add(o[0],n.mul(n.add(n.mul(-1,o[0]),m),l)),o[1]=n.add(o[1],n.mul(n.add(n.mul(-1,o[1]),o[0]),l)),o[2]=n.add(o[2],n.mul(n.add(n.mul(-1,o[2]),o[1]),l)),o[3]=n.add(o[3],n.mul(n.add(n.mul(-1,o[3]),o[2]),l));let d=n.switch(i,o[3],n.sub(m,o[3]));if(a){let t=n.data([0,0,0,0],1,{meta:!0}),s=n.clamp(n.mul(t[3],u)),a=n.sub(e[1],s);t[0]=n.add(t[0],n.mul(n.add(n.mul(-1,t[0]),a),l)),t[1]=n.add(t[1],n.mul(n.add(n.mul(-1,t[1]),t[0]),l)),t[2]=n.add(t[2],n.mul(n.add(n.mul(-1,t[2]),t[1]),l)),t[3]=n.add(t[3],n.mul(n.add(n.mul(-1,t[3]),t[2]),l)),r=[d,n.switch(i,t[3],n.sub(a,t[3]))]}else r=d;return r});let t=s=>{let a=Object.create(i),r=Object.assign({},t.defaults,i.defaults,s),o=r.input.isStereo;return e.factory(a,e.genish.filter24(n.in("input"),n.in("Q"),n.in("cutoff"),n.in("isLowPass"),o),["filters","Filter24Classic"],r)};return t.defaults={input:0,Q:.25,cutoff:880,isLowPass:1},t}},{"./filter.js":88,"genish.js":37}],90:[function(e,t,s){t.exports=function(t){const s=t.genish,n={Filter24Classic:e("./filter24.js")(t),Filter24Moog:e("./ladderFilterZeroDelay.js")(t),Filter24TB303:e("./diodeFilterZDF.js")(t),Filter12Biquad:e("./biquad.js")(t),Filter12SVF:e("./svf.js")(t),genish:{Comb:e("./combfilter.js"),AllPass:e("./allpass.js")},factory(e,t,i,a=null,r,o=!1){let u,l=Object.assign({},n.defaults,r);switch(l.filterType){case 1:u=s.filter24(e,s.in("Q"),t,l.filterMode,o);break;case 2:u=s.zd24(e,s.in("Q"),t);break;case 3:u=s.diodeZDF(e,s.in("Q"),t,s.in("saturation"),o);break;case 4:u=s.svf(e,t,s.sub(1,s.in("Q")),l.filterMode,o);break;case 5:u=s.biquad(e,t,s.in("Q"),l.filterMode,o);break;default:u=e}return u},defaults:{filterMode:0,filterType:0},export:e=>{for(let t in n)"export"!==t&&"genish"!==t&&(e[t]=n[t])}};return n}},{"./allpass.js":84,"./biquad.js":85,"./combfilter.js":86,"./diodeFilterZDF.js":87,"./filter24.js":89,"./ladderFilterZeroDelay.js":91,"./svf.js":92}],91:[function(e,t,s){const n=e("genish.js"),i=e("./filter.js");t.exports=function(e){e.genish.zd24=((e,t,s,i=!1)=>{const a=1/n.gen.samplerate,r=n.history(0),o=n.history(0),u=n.history(0),l=n.history(0),c=n.memo(n.add(.5,n.mul(t,23))),m=n.memo(n.mul(2*Math.PI,s)),d=n.memo(n.mul(2/a,n.tan(n.mul(m,a/2)))),h=n.memo(n.mul(d,a/2)),p=n.memo(n.mul(4,n.div(n.sub(c,.5),24.5))),f=n.add(1,h),g=n.memo(n.div(h,f)),j=n.memo(n.mul(g,g)),b=n.mul(j,g),y=n.mul(j,j),x=n.div(r.out,f),v=n.div(o.out,f),$=n.div(u.out,f),_=n.div(l.out,f),w=n.memo(n.add(n.add(n.mul(b,x),n.mul(j,v)),n.add(n.mul(g,$),_))),k=n.sub(e,n.mul(p,w)),O=n.memo(n.add(1,n.mul(p,y))),M=n.memo(n.div(k,O));let N=n.memo(n.mul(n.sub(M,r.out),g)),I=n.memo(n.add(N,r.out));return r.in(n.add(I,N)),N=n.memo(n.mul(n.sub(I,o.out),g)),I=n.memo(n.add(N,o.out)),o.in(n.add(I,N)),N=n.memo(n.mul(n.sub(I,u.out),g)),I=n.memo(n.add(N,u.out)),u.in(n.add(I,N)),N=n.memo(n.mul(n.sub(I,l.out),g)),I=n.memo(n.add(N,l.out)),l.in(n.add(I,N)),I});const t=s=>{const a=Object.create(i),r=Object.assign({},t.defaults,a.defaults,s),o=r.input.isStereo;return e.factory(a,e.genish.zd24(n.in("input"),n.in("Q"),n.in("cutoff"),o),["filters","Filter24Moog"],r)};return t.defaults={input:0,Q:.75,cutoff:440},t}},{"./filter.js":88,"genish.js":37}],92:[function(e,t,s){const n=e("genish.js"),i=e("./filter.js");t.exports=function(e){e.genish.svf=((e,t,s,i,a)=>{let r=n.data([0,0],1,{meta:!0}),o=n.data([0,0],1,{meta:!0}),u=n.memo(n.mul(2*Math.PI,n.div(t,n.gen.samplerate))),l=(n.memo(n.div(1,s)),n.memo(n.add(o[0],n.mul(u,r[0])))),c=n.memo(n.sub(n.sub(a?e[0]:e,l),n.mul(s,r[0]))),m=n.memo(n.add(n.mul(u,c),r[0])),d=n.memo(n.add(c,l));r[0]=m,o[0]=l;let h,p=n.selector(i,l,c,m,d);if(a){let t=n.data([0,0],1,{meta:!0}),a=n.data([0,0],1,{meta:!0}),r=n.memo(n.add(a[0],n.mul(u,t[0]))),o=n.memo(n.sub(n.sub(e[1],r),n.mul(s,t[0]))),l=n.memo(n.add(n.mul(u,o),t[0])),c=n.memo(n.add(o,r));t[0]=l,a[0]=r,h=[p,n.selector(i,r,o,l,c)]}else h=p;return h});let t=s=>{const a=Object.create(i),r=Object.assign({},t.defaults,i.defaults,s),o=r.input.isStereo;return e.factory(a,e.genish.svf(n.in("input"),n.mul(n.in("cutoff"),n.gen.samplerate/5),n.sub(1,n.in("Q")),n.in("mode"),o),["filters","Filter12SVF"],r)};return t.defaults={input:0,Q:.65,cutoff:440,mode:0},t}},{"./filter.js":88,"genish.js":37}],93:[function(e,t,s){let n=e("genish.js"),i=e("./effect.js");t.exports=function(e){let t=s=>{let a,r=Object.assign({bitCrusherLength:44100},t.defaults,i.defaults,s),o=Object.create(i),u=void 0===r.input.isStereo||r.input.isStereo,l=n.in("input"),c=n.in("bitDepth"),m=n.in("sampleRate"),d=u?l[0]:l,h=u?l[1]:null,p=n.history(0),f=n.counter(m,0,1),g=n.pow(n.mul(c,16),2),j=n.div(n.floor(n.mul(d,g)),g),b=n.switch(f.wrap,j,p.out);if(u){n.history(0);let t=n.div(n.floor(n.mul(h,g)),g),s=ternary(f.wrap,t,p.out);a=e.factory(o,[b,s],["fx","bitCrusher"],r)}else a=e.factory(o,b,["fx","bitCrusher"],r);return a};return t.defaults={input:0,bitDepth:.5,sampleRate:.5},t}},{"./effect.js":99,"genish.js":37}],94:[function(e,t,s){let n=e("genish.js"),i=e("./effect.js");t.exports=function(e){let t=Object.create(i),s=a=>{let r=Object.create(t),o=Object.assign({},s.defaults,i.defaults,a),u=void 0!==o.input.isStereo&&o.input.isStereo,l=n.accum(1,0,{shouldWrap:!1}),c=n.in("input"),m=u?c[0]:c,d=(u&&c[1],n.in("rate")),h=n.in("chance"),p=n.in("reverseChance"),f=n.in("repitchChance"),g=n.in("repitchMin"),j=n.in("repitchMax"),b=n.history(1),y=n.eq(n.mod(l,d),0),x=n.memo(n.sah(n.lt(n.noise(),h),y,0)),v=n.memo(n.and(y,x)),$=n.lt(n.noise(),p),_=n.switch($,-1,1),w=n.ifelse(n.and(v,n.lt(n.noise(),f)),n.memo(n.mul(n.add(g,n.mul(n.sub(j,g),n.noise())),_)),_);b.in(n.switch(v,w,b.out));let k=n.memo(n.div(d,100)),O=(n.memo(n.div(1,k)),n.data(88200)),M=(u&&n.data(88200),n.accum(b.out,0,{shouldWrap:!1})),N=n.wrap(n.sub(n.mod(M,88200),22050),0,88200),I=n.peek(O,n.accum(1,0,{max:88200}),{mode:"simple"}),S=n.switch(x,N,n.mod(M,88200)),P=n.memo(n.peek(O,S,{mode:"samples"})),q=(n.and(v,x),n.accum(1,v,{shouldWrap:!1})),D=n.memo(n.div(q,k)),U=n.div(n.sub(d,q),n.sub(d,k)),A=n.ifelse(n.lt(q,k),n.memo(n.mul(n.switch(n.lt(D,1),D,1),P)),n.gt(q,n.sub(d,k)),n.memo(n.mul(n.gtp(U,0),P)),P),F=n.mix(I,A,x),C=(n.poke(O,m,n.mod(n.add(l,44100),88200)),n.pan(F,F,n.in("pan")));return e.factory(r,[C.left,C.right],["fx","shuffler"],o)};return s.defaults={input:0,rate:22050,chance:.25,reverseChance:.5,repitchChance:.5,repitchMin:.5,repitchMax:2,pan:.5,mix:.5},s}},{"./effect.js":99,"genish.js":37}],95:[function(e,t,s){const n=e("genish.js"),i=e("./effect.js");t.exports=function(e){let t=s=>{const a=Object.assign({},t.defaults,i.defaults,s),r=Object.create(e.prototypes.ugen),o=n.in("input"),u=n.in("slowFrequency"),l=n.in("fastFrequency"),c=n.in("slowGain"),m=n.in("fastGain"),d=void 0===a.input.isStereo||a.input.isStereo,h=d?o[0]:o,p=n.env("inversewelch",1024),f=n.env("inversewelch",1024,0,.333),g=n.env("inversewelch",1024,0,.666),j=n.phasor(u,0,{min:0}),b=n.mul(n.peek(p,j),c),y=n.mul(n.peek(f,j),c),x=n.mul(n.peek(g,j),c),v=n.phasor(l,0,{min:0}),$=n.mul(n.peek(p,v),m),_=n.mul(n.peek(f,v),m),w=n.mul(n.peek(g,v),m);const k=("processor"===e.mode?e.processor.sampleRate:e.ctx.sampleRate)/1e3,O=100*k,M=n.mul(n.add(b,$,5),k),N=n.mul(n.add(y,_,5),k),I=n.mul(n.add(x,w,5),k),S=n.delay(h,M,{size:O}),P=n.delay(h,N,{size:O}),q=n.delay(h,I,{size:O}),D=n.add(S,P,q);if(d){const e=o[1],t=n.delay(e,M,{size:O}),s=n.delay(e,N,{size:O}),i=n.delay(e,I,{size:O}),a=n.add(t,P,i);r.graph=[n.add(S,s,q),a]}else r.graph=D;return e.factory(r,r.graph,["fx","chorus"],a)};return t.defaults={input:0,slowFrequency:.18,slowGain:1,fastFrequency:6,fastGain:.2},t}},{"./effect.js":99,"genish.js":37}],96:[function(e,t,s){const n=e("genish.js"),i=e("./effect.js"),a=n;t.exports=function(e){const t=s=>{const r=Object.assign({},t.defaults,i.defaults,s),o=Object.create(i),u=void 0===r.input.isStereo||r.input.isStereo,l=n.in("input"),c=n.in("damping"),m=n.in("drywet"),d=n.in("decay"),h=n.in("predelay"),p=n.in("inbandwidth"),f=n.in("decaydiffusion1"),g=n.in("decaydiffusion2"),j=n.in("indiffusion1"),b=n.in("indiffusion2"),y=!0===u?n.add(l[0],l[1]):l;let x;{const t=n.mstosamps(h),s=n.delay(y,t,{size:4410}),i=n.history(0),v=n.mix(i.out,s,p);i.in(v);const $=function(e,t,s,i,r){"use jsdsp";const o=[[],[],[],[],[]],u=a.add(e,0),l=a.add(u,0),c=n.delay(l,[a.add(a.mul(n.cycle(.1),16),672)],{size:688});l.inputs[1]=a.mul(c,t);const m=a.sub(c,a.mul(l,t)),d=n.delay(m,[4453,353,3627,1190]);o[3].push(a.add(d.outputs[1],d.outputs[2])),o[2].push(d.outputs[3]);const h=n.history(0),p=n.mix(d,h.out,i);h.in(p);const f=a.mul(p,r),g=a.sub(f,0),j=n.delay(g,[1800,187,1228]);o[2].push(j.outputs[1]),o[4].push(j.outputs[2]),g.inputs[1]=a.mul(j,s);const b=a.mul(g,s),y=a.add(j,b),x=n.delay(y,[3720,1066,2673]);o[2].push(x.outputs[1]),o[3].push(x.outputs[2]);const v=a.add(a.mul(x,r),e),$=a.add(v,0),_=n.delay($,a.add(a.mul(n.cycle(.07),16),908),{size:924});$.inputs[1]=a.mul(_,t);const w=a.sub(_,a.mul($,t)),k=n.delay(w,[4217,266,2974,2111]);o[1].push(a.add(k.outputs[1],k.outputs[2])),o[4].push(k.outputs[3]);const O=n.history(0),M=n.mix(k,O.out,i);O.in(M);const N=a.mul(M,r),I=a.sub(N,0),S=n.delay(I,[2656,335,1913]);o[4].push(S.outputs[1]),o[2].push(S.outputs[2]),I.inputs[1]=a.mul(S,s);const P=a.mul(I,s),q=a.add(S,P),D=n.delay(q,[3163,121,1996]);return o[4].push(x.outputs[1]),o[1].push(x.outputs[2]),u.inputs[1]=a.mul(D,r),o[1]=n.add(...o[1]),o[2]=n.add(...o[2]),o[3]=n.add(...o[3]),o[4]=n.add(...o[4]),o}(((e,t,s)=>{"use jsdsp";const i=a.sub(e,0),r=n.delay(i,142);i.inputs[1]=a.mul(r,t);const o=a.add(a.mul(i,t),r),u=a.sub(o,0),l=n.delay(u,107);u.inputs[1]=a.mul(l,t);const c=a.add(a.mul(u,t),l),m=a.sub(c,0),d=n.delay(m,379);m.inputs[1]=a.mul(d,s);const h=a.add(a.mul(m,s),d),p=a.sub(h,0),f=n.delay(p,277);return p.inputs[1]=a.mul(f,s),a.add(a.mul(p,s),f)})(v,j,b),f,g,c,d),_=a.mul(a.sub($[1],$[2]),.6),w=a.mul(a.sub($[3],$[4]),.6),k=n.mix(u?l[0]:l,_,m),O=n.mix(u?l[1]:l,w,m);x=e.factory(o,[k,O],["fx","plate"],r)}return x};return t.defaults={input:0,damping:.5,drywet:.5,decay:.5,predelay:10,inbandwidth:.5,indiffusion1:.75,indiffusion2:.625,decaydiffusion1:.7,decaydiffusion2:.5},t}},{"./effect.js":99,"genish.js":37}],97:[function(e,t,s){let n=e("genish.js"),i=e("./effect.js");t.exports=function(e){let t=s=>{let a=Object.assign({delayLength:44100},t.defaults,s),r=Object.create(i),o=void 0!==a.input.isStereo&&a.input.isStereo,u=n.in("input"),l=n.in("time"),c=n.in("wetdry"),m=o?u[0]:u,d=o?u[1]:null,h=n.in("feedback"),p=n.history(),f=n.delay(n.add(m,n.mul(p.out,h)),l,{size:a.delayLength});p.in(f);let g,j=n.mix(m,f,c);if(o){let t=n.history(),s=n.delay(n.add(d,n.mul(t.out,h)),l,{size:a.delayLength});t.in(s);const i=n.mix(d,s,c);g=e.factory(r,[j,i],["fx","delay"],a)}else g=e.factory(r,j,["fx","delay"],a);return g};return t.defaults={input:0,feedback:.75,time:11025,wetdry:.5},t}},{"./effect.js":99,"genish.js":37}],98:[function(e,t,s){const n=e("genish.js"),i=e("./effect.js"),a=n;t.exports=function(e){let t=s=>{let r=Object.assign({},t.defaults,i.defaults,s),o=Object.create(i),u=void 0===r.input.isStereo||r.input.isStereo;const l=n.in("input"),c=n.in("shape1"),m=n.in("shape2"),d=n.in("pregain"),h=n.in("postgain");let p,f;{const e=u?l[0]:l,t=a.sub(n.exp(a.mul(e,a.add(c,d))),n.exp(a.mul(e,a.sub(m,d)))),s=a.add(n.exp(a.mul(e,d)),n.exp(a.mul(a.mul(-1,e),d)));p=a.mul(a.div(t,s),h)}if(u){let t;{const e=u?l[1]:l,s=a.sub(n.exp(a.mul(e,a.add(c,d))),n.exp(a.mul(e,a.sub(m,d)))),i=a.add(n.exp(a.mul(e,d)),n.exp(a.mul(a.mul(-1,e),d)));t=a.mul(a.div(s,i),h)}f=e.factory(o,[p,t],["fx","distortion"],r)}else f=e.factory(o,p,["fx","distortion"],r);return f};return t.defaults={input:0,shape1:.1,shape2:.1,pregain:5,postgain:.5},t}},{"./effect.js":99,"genish.js":37}],99:[function(e,t,s){let n=e("../ugen.js"),i=Object.create(n);Object.assign(i,{defaults:{bypass:!1}}),t.exports=i},{"../ugen.js":135}],100:[function(e,t,s){t.exports=function(t){const s={Freeverb:e("./freeverb.js")(t),Plate:e("./dattorro.js")(t),Flanger:e("./flanger.js")(t),Vibrato:e("./vibrato.js")(t),Delay:e("./delay.js")(t),BitCrusher:e("./bitCrusher.js")(t),Distortion:e("./distortion.js")(t),RingMod:e("./ringMod.js")(t),Tremolo:e("./tremolo.js")(t),Chorus:e("./chorus.js")(t),Shuffler:e("./bufferShuffler.js")(t),export:e=>{for(let t in s)"export"!==t&&(e[t]=s[t])}};return s}},{"./bitCrusher.js":93,"./bufferShuffler.js":94,"./chorus.js":95,"./dattorro.js":96,"./delay.js":97,"./distortion.js":98,"./flanger.js":101,"./freeverb.js":102,"./ringMod.js":103,"./tremolo.js":104,"./vibrato.js":105}],101:[function(e,t,s){let n=e("genish.js"),i=e("./effect.js");t.exports=function(e){let t=s=>{let a,r=Object.assign({delayLength:44100},t.defaults,i.defaults,s),o=Object.create(i),u=void 0===r.input.isStereo||r.input.isStereo,l=n.in("input"),c=r.delayLength,m=n.in("feedback"),d=n.in("offset"),h=n.in("frequency"),p=n.data(c),f=n.accum(1,0,{min:0,max:c,interp:"none",mode:"samples"}),g=n.mul(d,500),j=void 0===r.mod?n.cycle(h):r.mod,b=n.wrap(n.add(n.sub(f,g),j),0,c),y=u?l[0]:l,x=n.peek(p,b,{interp:"linear",mode:"samples"});n.poke(p,n.add(y,n.mul(x,m)),f);let v,$,_=n.add(y,x);if(!0===u){rightInput=l[1],a=n.data(c);let t=n.peek(a,b,{interp:"linear",mode:"samples"});n.poke(a,n.add(rightInput,n.mul(t,m)),f),v=n.add(rightInput,t),$=e.factory(o,[_,v],["fx","flanger"],r)}else $=e.factory(o,_,["fx","flanger"],r);return $};return t.defaults={input:0,feedback:.01,offset:.25,frequency:.5},t}},{"./effect.js":99,"genish.js":37}],102:[function(e,t,s){const n=e("genish.js"),i=e("./effect.js");t.exports=function(e){const t=e.filters.genish.AllPass,s=e.filters.genish.Comb,a={combCount:8,combTuning:[1116,1188,1277,1356,1422,1491,1557,1617],allPassCount:4,allPassTuning:[225,556,441,341],allPassFeedback:.5,fixedGain:.015,scaleDamping:.4,scaleRoom:.28,offsetRoom:.7,stereoSpread:23},r=o=>{let u=Object.assign({},r.defaults,i.defaults,o),l=Object.create(i),c=void 0===u.input.isStereo||u.input.isStereo,m=[],d=[],h=n.in("input"),p=n.in("wet1"),f=n.in("wet2"),g=n.in("dry"),j=n.in("roomSize"),b=n.in("damping"),y=!0===c?n.add(h[0],h[1]):h,x=n.memo(n.mul(y,a.fixedGain));for(let e=0;e<8;e++)m.push(s(x,a.combTuning[e],n.mul(b,.4),n.mul(a.scaleRoom+a.offsetRoom,j))),d.push(s(x,a.combTuning[e]+a.stereoSpread,n.mul(b,.4),n.mul(a.scaleRoom+a.offsetRoom,j)));let v=n.add(x,...m),$=n.add(x,...d);for(let e=0;e<4;e++)v=t(v,a.allPassTuning[e]+a.stereoSpread),$=t($,a.allPassTuning[e]+a.stereoSpread);let _=n.add(n.mul(v,p),n.mul($,f),n.mul(!0===c?h[0]:h,g)),w=n.add(n.mul($,p),n.mul(v,f),n.mul(!0===c?h[1]:h,g));return e.factory(l,[_,w],["fx","freeverb"],u)};return r.defaults={input:0,wet1:1,wet2:0,dry:.5,roomSize:.84,damping:.5,bypass:!1},r}},{"./effect.js":99,"genish.js":37}],103:[function(e,t,s){let n=e("genish.js"),i=e("./effect.js");t.exports=function(e){let t=s=>{let a,r,o=Object.assign({},t.defaults,i.defaults,s),u=Object.create(i),l=void 0===o.input.isStereo||o.input.isStereo,c=n.in("input"),m=n.in("frequency"),d=n.in("gain"),h=n.in("mix"),p=l?c[0]:c,f=n.mul(n.cycle(m),d),g=n.add(n.mul(p,n.sub(1,h)),n.mul(n.mul(p,f),h));if(!0===l){let t=c[1];a=n.add(n.mul(t,n.sub(1,h)),n.mul(n.mul(t,f),h)),r=e.factory(u,[g,a],"ringMod",o)}else r=e.factory(u,g,["fx","ringMod"],o);return r};return t.defaults={input:0,frequency:220,gain:1,mix:1},t}},{"./effect.js":99,"genish.js":37}],104:[function(e,t,s){const n=e("genish.js"),i=e("./effect.js");t.exports=function(e){const t=s=>{const a=Object.assign({},t.defaults,i.defaults,s),r=Object.create(i),o=void 0===a.input.isStereo||a.input.isStereo,u=n.in("input"),l=n.in("frequency"),c=n.in("amount"),m=o?u[0]:u;let d;d="square"===a.shape?n.gt(n.phasor(l),0):"saw"===a.shape?n.gtp(n.phasor(l),0):n.cycle(l);const h=n.mul(d,c);let p,f,g=n.sub(m,n.mul(m,h));if(!0===o){let t=u[1];p=n.mul(t,h),f=e.factory(r,[g,p],["fx","tremolo"],a)}else f=e.factory(r,g,["fx","tremolo"],a);return f};return t.defaults={input:0,frequency:2,amount:1,shape:"sine"},t}},{"./effect.js":99,"genish.js":37}],105:[function(e,t,s){let n=e("genish.js"),i=e("./effect.js");t.exports=function(e){let t=s=>{let a,r=Object.assign({},t.defaults,i.defaults,s),o=Object.create(i),u=void 0===r.input.isStereo||r.input.isStereo,l=n.in("input"),c=n.in("amount"),m=n.in("frequency"),d=n.data(44100),h=n.accum(1,0,{min:0,max:44100,interp:"none",mode:"samples"}),p=n.mul(c,500),f=n.wrap(n.add(n.sub(h,p),n.mul(n.cycle(m),n.sub(p,1))),0,44100),g=u?l[0]:l,j=n.peek(d,f,{interp:"linear",mode:"samples"});n.poke(d,n.add(g,n.mul(j,.01)),h);let b,y,x=j;if(!0===u){rightInput=l[1],a=n.data(44100);let t=n.peek(a,f,{interp:"linear",mode:"samples"});n.poke(a,n.add(rightInput,mul(t,.01)),h),b=t,y=e.factory(o,[x,b],["fx","vibrato"],r)}else y=e.factory(o,x,["fx","vibrato"],r);return y};return t.defaults={input:0,amount:.5,frequency:4},t}},{"./effect.js":99,"genish.js":37}],106:[function(e,t,s){let n=e("memory-helper"),i={blockCallbacks:[],dirtyUgens:[],callbackUgens:[],callbackNames:[],analyzers:[],graphIsDirty:!1,ugens:{},debug:!1,id:-1,preventProxy:!1,output:null,memory:null,factory:null,genish:e("genish.js"),scheduler:e("./scheduling/scheduler.js"),workletProcessor:null,memoed:{},mode:"scriptProcessor",prototypes:{ugen:e("./ugen.js"),instrument:e("./instruments/instrument.js"),effect:e("./fx/effect.js")},mixins:{polyinstrument:e("./instruments/polyMixin.js")},workletPath:"./gibberish_worklet.js",init(e,t,s){let a=isNaN(e)?5292e4:e;this.genish.gen.mode="scriptProcessor",this.memory=n.create(a),this.mode=void 0!==window.AudioWorklet?"worklet":"scriptprocessor",void 0!==s&&(this.mode=s),this.hasWorklet=void 0!==window.AudioWorklet&&"function"==typeof window.AudioWorklet;const r=this.hasWorklet?this.utilities.createWorklet:this.utilities.createScriptProcessor;if(this.analyzers.dirty=!1,"worklet"===this.mode){return new Promise((e,s)=>{new Promise((e,s)=>{this.utilities.createContext(t,r.bind(this.utilities),e)}).then(()=>{i.preventProxy=!0,i.load(),i.output=this.Bus2(),i.preventProxy=!1,e()})})}"processor"===this.mode&&(i.load(),i.output=this.Bus2())},load(){this.factory=e("./ugenTemplate.js")(this),this.Panner=e("./misc/panner.js")(this),this.PolyTemplate=e("./instruments/polytemplate.js")(this),this.oscillators=e("./oscillators/oscillators.js")(this),this.filters=e("./filters/filters.js")(this),this.binops=e("./misc/binops.js")(this),this.monops=e("./misc/monops.js")(this),this.Bus=e("./misc/bus.js")(this),this.Bus2=e("./misc/bus2.js")(this),this.instruments=e("./instruments/instruments.js")(this),this.fx=e("./fx/effects.js")(this),this.Sequencer=e("./scheduling/sequencer.js")(this),this.Sequencer2=e("./scheduling/seq2.js")(this),this.envelopes=e("./envelopes/envelopes.js")(this),this.analysis=e("./analysis/analyzers.js")(this),this.time=e("./misc/time.js")(this)},export(e,t=!1){if(void 0===e)throw Error("You must define a target object for Gibberish to export variables to.");t&&this.genish.export(e),this.instruments.export(e),this.fx.export(e),this.filters.export(e),this.oscillators.export(e),this.binops.export(e),this.monops.export(e),this.envelopes.export(e),this.analysis.export(e),e.Sequencer=this.Sequencer,e.Sequencer2=this.Sequencer2,e.Bus=this.Bus,e.Bus2=this.Bus2,e.Scheduler=this.scheduler,this.time.export(e),this.utilities.export(e)},print(){console.log(this.callback.toString())},dirty(e){e===this.analyzers?(this.graphIsDirty=!0,this.analyzers.dirty=!0):(this.dirtyUgens.push(e),this.graphIsDirty=!0,this.memoed[e.ugenName]&&delete this.memoed[e.ugenName])},clear(){this.output.inputs=[0],this.analyzers.length=0,this.scheduler.clear(),this.dirty(this.output),"worklet"===this.mode&&this.worklet.port.postMessage({address:"method",object:this.id,name:"clear",args:[]})},generateCallback(){if("worklet"===this.mode)return i.callback=function(){return 0},i.callback;let e,t;return this.memoed={},t=(e=this.processGraph(this.output))[e.length-1],e.unshift("\t'use strict'"),this.analyzers.forEach(t=>{const s=i.processUgen(t),n=s.pop();s.forEach(t=>{e.splice(e.length-1,0,t)}),e.push(n)}),this.analyzers.forEach(e=>{-1===this.callbackUgens.indexOf(e.callback)&&this.callbackUgens.push(e.callback)}),this.callbackNames=this.callbackUgens.map(e=>e.ugenName),e.push("\n\treturn "+t.split("=")[0].split(" ")[1]),!0===this.debug&&console.log("callback:\n",e.join("\n")),this.callbackNames.push("memory"),this.callbackUgens.push(this.memory.heap),this.callback=Function(...this.callbackNames,e.join("\n")),this.callback.out=[],this.oncallback&&this.oncallback(this.callback),this.callback},processGraph(e){this.callbackUgens.length=0,this.callbackNames.length=0,this.callbackUgens.push(e.callback);let t=this.processUgen(e);return this.dirtyUgens.length=0,this.graphIsDirty=!1,t},proxyReplace(e){if("object"==typeof e&&void 0!==e.id){const t=processor.ugens.get(e.id);return void 0!==e.prop?t[e.prop]:t}return e},processUgen(e,t){void 0===t&&(t=[]);let s=i.dirtyUgens.indexOf(e),n=i.memoed[e.ugenName];if(void 0!==n)return n;if(!0===e||!1===e)throw"Why is ugen a boolean? [true] or [false]";if(void 0===e.block||-1!==dirtyIndex){let n,a=`\tvar v_${e.id} = `;e.isop||(a+=`${e.ugenName}( `),n=!0===e.isop||"bus"===e.type||"analysis"===e.type?Object.keys(e.inputs):[...e.inputNames];for(let s=0;s<n.length;s++){let r,o=n[s];if(void 0!==(r=e.isop||"bus"===e.type||"analysis"===e.type?e.inputs[o]:e[o])){if(!0===r.bypass){let e=!1;for(;"undefined"!==r.input&&!1===e;)void 0!==r.input.bypass?!1===(r=r.input).bypass&&(e=!0):(r=r.input,e=!0)}"number"==typeof r?a+=r:"boolean"==typeof r?a+=""+r:("processor"===i.mode&&void 0===r.ugenName&&void 0!==r.id&&(r=i.processor.ugens.get(r.id)),i.processUgen(r,t),r.isop||-1===i.callbackUgens.indexOf(r.callback)&&i.callbackUgens.push(r.callback),a+=`v_${r.id}`,r.__varname=`v_${r.id}`),s<n.length-1&&(a+=e.isop?" "+e.op+" ":", ")}}("analysis"===e.type||"bus"===e.type&&n.length>0)&&(a+=", "),e.isop||"seq"===e.type||(a+="memory"),a+=e.isop?"":" )",t.push(a),i.memoed[e.ugenName]=`v_${e.id}`,-1!==s&&i.dirtyUgens.splice(s,1)}else if(e.block)return e.block;return t}};i.utilities=e("./utilities.js")(i),t.exports=i},{"./analysis/analyzers.js":76,"./envelopes/envelopes.js":81,"./filters/filters.js":90,"./fx/effect.js":99,"./fx/effects.js":100,"./instruments/instrument.js":111,"./instruments/instruments.js":112,"./instruments/polyMixin.js":116,"./instruments/polytemplate.js":117,"./misc/binops.js":121,"./misc/bus.js":122,"./misc/bus2.js":123,"./misc/monops.js":124,"./misc/panner.js":125,"./misc/time.js":126,"./oscillators/oscillators.js":129,"./scheduling/scheduler.js":132,"./scheduling/seq2.js":133,"./scheduling/sequencer.js":134,"./ugen.js":135,"./ugenTemplate.js":136,"./utilities.js":137,"genish.js":37,"memory-helper":141}],107:[function(e,t,s){let n=e("genish.js"),i=e("./instrument.js");t.exports=function(e){const t=s=>{let a=Object.create(i),r=n.in("frequency"),o=n.in("decay"),u=n.in("gain"),l=Object.assign({},t.defaults,s),c=n.bang(),m=n.mul(c,60),d=n.sub(.101,n.div(o,10)),h=n.svf(m,r,d,2,!1),p=n.mul(h,u);return a.env=c,e.factory(a,p,["instruments","conga"],l),a};return t.defaults={gain:.25,frequency:190,decay:.85},t}},{"./instrument.js":111,"genish.js":37}],108:[function(e,t,s){let n=e("genish.js"),i=e("./instrument.js");t.exports=function(e){const t=s=>{let a=Object.create(i);const r=n.in("decay"),o=n.in("gain"),u=Object.assign({},t.defaults,s),l=n.param("bpfc",1e3),c=e.oscillators.factory("square",560),m=e.oscillators.factory("square",845),d=n.decay(n.mul(r,2*n.gen.samplerate)),h=n.svf(n.add(c,m),l,3,2,!1),p=n.mul(h,d),f=n.mul(p,o);return a.env=d,a.isStereo=!1,a=e.factory(a,f,["insturments","cowbell"],u)};return t.defaults={gain:1,decay:.5},t}},{"./instrument.js":111,"genish.js":37}],109:[function(e,t,s){let n=e("genish.js"),i=e("./instrument.js");t.exports=function(e){let t=s=>{let a=Object.create(i),r=n.in("frequency"),o=n.in("glide"),u=n.slide(r,o,o),l=n.in("cmRatio"),c=n.in("index"),m=n.in("feedback"),d=n.in("attack"),h=n.in("decay"),p=n.in("sustain"),f=n.in("sustainLevel"),g=n.in("release");const j=Object.assign({},t.defaults,s);return Object.assign(a,j),a.__createGraph=function(){const t=e.envelopes.factory(j.useADSR,j.shape,d,h,p,f,g,j.triggerRelease),s=n.history(0),i=e.oscillators.factory(a.modulatorWaveform,n.add(n.mul(u,l),n.mul(s.out,m,c)),a.antialias),o=n.mul(i,n.mul(u,c)),b=n.mul(o,t),y=n.mul(.5,n.add(b,s.out));s.in(y);const x=e.oscillators.factory(a.carrierWaveform,n.add(u,y),a.antialias),v=n.mul(x,t),$=n.mul(n.in("cutoff"),r),_=n.mul(n.mul($,n.pow(2,n.in("filterMult"))),t),w=e.filters.factory(v,_,n.in("Q"),n.in("saturation"),a),k=n.mul(w,n.in("gain"));let O;!0===j.panVoices?(O=n.pan(k,k,n.in("pan")),a.graph=[O.left,O.right]):a.graph=k,a.env=t},a.__requiresRecompilation=["carrierWaveform","modulatorWaveform","antialias","filterType","filterMode"],a.__createGraph(),e.factory(a,a.graph,["instruments","FM"],j)};t.defaults={carrierWaveform:"sine",modulatorWaveform:"sine",attack:44,feedback:0,decay:22050,sustain:44100,sustainLevel:.6,release:22050,useADSR:!1,shape:"linear",triggerRelease:!1,gain:1,cmRatio:2,index:5,pulsewidth:.25,frequency:220,pan:.5,antialias:!1,panVoices:!1,glide:1,saturation:1,filterMult:1.5,Q:.25,cutoff:.35,filterType:0,filterMode:0,isLowPass:1};let s=e.PolyTemplate(t,["glide","frequency","attack","decay","pulsewidth","pan","gain","cmRatio","index","saturation","filterMult","Q","cutoff","antialias","filterType","carrierWaveform","modulatorWaveform","filterMode","feedback","useADSR","sustain","release","sustainLevel"]);return[t,s]}},{"./instrument.js":111,"genish.js":37}],110:[function(e,t,s){let n=e("genish.js"),i=e("./instrument.js");t.exports=function(e){let t=s=>{let a=Object.create(i),r=n.in("tune"),o=n.memo(n.add(.4,r)),u=n.in("decay"),l=n.in("gain"),c=Object.assign({},t.defaults,s),m=n.mul(325,o),d=n.mul(n.param("bpfc",7e3),o),h=n.mul(n.param("hpfc",11e3),o),p=e.oscillators.factory("square",m,!1),f=e.oscillators.factory("square",n.mul(m,1.4471)),g=e.oscillators.factory("square",n.mul(m,1.617)),j=e.oscillators.factory("square",n.mul(m,1.9265)),b=e.oscillators.factory("square",n.mul(m,2.5028)),y=e.oscillators.factory("square",n.mul(m,2.6637)),x=n.add(p,f,g,j,b,y),v=n.decay(n.mul(u,2*n.gen.samplerate)),$=n.svf(x,d,.5,2,!1),_=n.mul($,v),w=n.filter24(_,0,h,0),k=n.mul(w,l);return a.env=v,a.isStereo=!1,e.factory(a,k,["instruments","hat"],c)};return t.defaults={gain:1,tune:.6,decay:.1},t}},{"./instrument.js":111,"genish.js":37}],111:[function(e,t,s){let n=e("../ugen.js"),i=(e("genish.js"),Object.create(n));Object.assign(i,{note(e){this.frequency=e,this.env.trigger()},trigger(e=1){this.gain=e,this.env.trigger()}}),t.exports=i},{"../ugen.js":135,"genish.js":37}],112:[function(e,t,s){t.exports=function(t){const s={Kick:e("./kick.js")(t),Conga:e("./conga.js")(t),Clave:e("./conga.js")(t),Hat:e("./hat.js")(t),Snare:e("./snare.js")(t),Cowbell:e("./cowbell.js")(t)};return s.Clave.defaults.frequency=2500,s.Clave.defaults.decay=.5,[s.Synth,s.PolySynth]=e("./synth.js")(t),[s.Monosynth,s.PolyMono]=e("./monosynth.js")(t),[s.FM,s.PolyFM]=e("./fm.js")(t),[s.Sampler,s.PolySampler]=e("./sampler.js")(t),[s.Karplus,s.PolyKarplus]=e("./karplusstrong.js")(t),s.export=(e=>{for(let t in s)"export"!==t&&(e[t]=s[t])}),s}},{"./conga.js":107,"./cowbell.js":108,"./fm.js":109,"./hat.js":110,"./karplusstrong.js":113,"./kick.js":114,"./monosynth.js":115,"./sampler.js":118,"./snare.js":119,"./synth.js":120}],113:[function(e,t,s){const n=e("genish.js"),i=e("./instrument.js");t.exports=function(e){const t=s=>{const a=Object.assign({},t.defaults,s);let r=Object.create(i),o="processor"===e.mode?e.processor.sampleRate:e.ctx.sampleRate;const u=n.bang(),l=n.accum(1,u,{max:1/0}),c=n.gtp(n.sub(1,n.div(l,200)),0),m=n.mul(n.noise(),c),d=n.history(),h=n.in("frequency"),p=n.in("glide"),f=n.slide(h,p,p),g=n.delay(n.add(m,d.out),n.div(o,f),{size:2048}),j=n.mul(g,n.t60(n.mul(n.in("decay"),f))),b=n.mix(j,d.out,n.in("damping")),y=n.mul(b,n.in("gain"));d.in(b);const x=Object.assign({},t.defaults,a);if(Object.assign(r,{properties:a,env:u,phase:l,getPhase:()=>e.memory.heap[l.memory.value.idx]}),x.panVoices){const t=n.pan(y,y,n.in("pan"));r=e.factory(r,[t.left,t.right],["instruments","karplus"],a)}else r=e.factory(r,y,["instruments","karplus"],a);return r};t.defaults={decay:.97,damping:.2,gain:1,frequency:220,pan:.5,glide:1,panVoices:!1};let s=e.PolyTemplate(t,["frequency","decay","damping","pan","gain","glide"],(t,s)=>{let n=()=>{t.getPhase()>s.decay*sampleRate?(s.disconnectUgen(t),t.isConnected=!1,e.memory.heap[t.phase.memory.value.idx]=0):e.blockCallbacks.push(n)};return n});return[t,s]}},{"./instrument.js":111,"genish.js":37}],114:[function(e,t,s){let n=e("genish.js"),i=e("./instrument.js");t.exports=function(e){let t=s=>{let a=Object.create(i),r=n.in("frequency"),o=n.in("decay"),u=n.in("tone"),l=n.in("gain"),c=Object.assign({},t.defaults,s);Object.assign(a,c);let m=n.bang(),d=n.mul(m,60),h=n.sub(1.005,o),p=n.add(50,n.mul(u,4e3)),f=n.svf(d,r,h,2,!1),g=n.svf(f,p,.5,0,!1),j=n.mul(g,l);return a.env=m,e.factory(a,j,["instruments","kick"],c)};return t.defaults={gain:1,frequency:85,tone:.25,decay:.9},t}},{"./instrument.js":111,"genish.js":37}],115:[function(e,t,s){const n=e("genish.js"),i=e("./instrument.js");e("../oscillators/fmfeedbackosc.js");t.exports=function(e){const t=s=>{const a=Object.create(i),r=[],o=n.in("frequency"),u=n.in("glide"),l=n.memo(n.slide(o,u,u)),c=n.in("attack"),m=n.in("decay"),d=n.in("sustain"),h=n.in("sustainLevel"),p=n.in("release"),f=Object.assign({},t.defaults,s);return Object.assign(a,f),a.__createGraph=function(){const t=e.envelopes.factory(f.useADSR,f.shape,c,m,d,h,p,f.triggerRelease);for(let t=0;t<3;t++){let s,i;switch(t){case 1:i=n.add(l,n.mul(l,n.in("detune2")));break;case 2:i=n.add(l,n.mul(l,n.in("detune3")));break;default:i=l}s=e.oscillators.factory(a.waveform,i,a.antialias),r[t]=s}const s=n.add(...r),i=n.mul(n.mul(s,t),n.in("gain")),u=n.mul(n.in("cutoff"),o),g=n.mul(n.mul(u,n.pow(2,n.in("filterMult"))),t),j=e.filters.factory(i,g,n.in("Q"),n.in("saturation"),a);if(f.panVoices){const e=n.pan(j,j,n.in("pan"));a.graph=[e.left,e.right]}else a.graph=j;a.env=t},a.__requiresRecompilation=["waveform","antialias","filterType","filterMode"],a.__createGraph(),e.factory(a,a.graph,["instruments","Monosynth"],f)};t.defaults={waveform:"saw",attack:44,decay:22050,sustain:44100,sustainLevel:.6,release:22050,useADSR:!1,shape:"linear",triggerRelease:!1,gain:.25,pulsewidth:.25,frequency:220,pan:.5,detune2:.005,detune3:-.005,cutoff:1,resonance:.25,Q:.5,panVoices:!1,glide:1,antialias:!1,filterType:2,filterMode:0,saturation:.5,filterMult:4,isLowPass:!0};let s=e.PolyTemplate(t,["frequency","attack","decay","cutoff","Q","detune2","detune3","pulsewidth","pan","gain","glide","saturation","filterMult","antialias","filterType","waveform","filterMode"]);return[t,s]}},{"../oscillators/fmfeedbackosc.js":128,"./instrument.js":111,"genish.js":37}],116:[function(e,t,s){t.exports={note(e,t){if("worklet"!==Gibberish.mode){let s=this.__getVoice__();Object.assign(s,this.properties),void 0===t&&(t=this.gain),s.gain=t,s.note(e),this.__runVoice__(s,this),this.triggerNote=e}},trigger(e){if(null!==this.triggerChord)this.triggerChord.forEach(t=>{let s=this.__getVoice__();Object.assign(s,this.properties),s.note(t),s.gain=e,this.__runVoice__(s,this)});else if(null!==this.triggerNote){let t=this.__getVoice__();Object.assign(t,this.properties),t.note(this.triggerNote),t.gain=e,this.__runVoice__(t,this)}else{let t=this.__getVoice__();Object.assign(t,this.properties),t.trigger(e),this.__runVoice__(t,this)}},__runVoice__(e,t){let s;e.isConnected||(e.connect(t),e.isConnected=!0),s=void 0===t.envCheck?function(){e.env.isComplete()?(t.disconnectUgen(e),e.isConnected=!1):Gibberish.blockCallbacks.push(s)}:t.envCheck(e,t),Gibberish.blockCallbacks.push(s)},__getVoice__(){return this.voices[this.voiceCount++%this.voices.length]},chord(e){"worklet"!==Gibberish.mode&&(e.forEach(e=>this.note(e)),this.triggerChord=e)},free(){for(let e of this.voices)e.free()}}},{}],117:[function(e,t,s){e("genish.js");const n=e("../workletProxy.js");t.exports=function(e){const t=(s,i,a)=>{const r=Object.create(e.Bus()),o=Object.create(e.Bus2());Object.assign(r,e.mixins.polyinstrument),Object.assign(o,e.mixins.polyinstrument);return u=>{const l=Object.assign({},{isStereo:!0},u),c=!0===l.isStereo?Object.create(o):Object.create(r);Object.assign(c,{voices:[],maxVoices:void 0!==l.maxVoices?l.maxVoices:16,voiceCount:0,envCheck:a,id:e.factory.getUID(),dirty:!0,type:"bus",ugenName:"poly"+s.name+"_"+c.id,inputs:[],inputNames:[],properties:l}),l.panVoices=l.isStereo,c.callback.ugenName=c.ugenName;for(let e=0;e<c.maxVoices;e++)c.voices[e]=s(l),c.voices[e].callback.ugenName=c.voices[e].ugenName,c.voices[e].isConnected=!1;let m;if(!1===l.isStereo){const e=(m=i.slice(0)).indexOf("pan");e>-1&&m.splice(e,1)}return t.setupProperties(c,s,l.isStereo?i:m),n(["instruments","Poly"+s.name],l,c)}};return t.setupProperties=function(e,t,s){for(let n of s)Object.defineProperty(e,n,{get:()=>e.properties[n]||t.defaults[n],set(t){e.properties[n]=t;for(let s of e.inputs)s[n]=t}})},t}},{"../workletProxy.js":138,"genish.js":37}],118:[function(e,t,s){const n=e("genish.js"),i=e("./instrument.js");t.exports=function(e){let t=Object.create(i);Object.assign(t,{note(e){this.rate=e,e>0?this.trigger():this.__phase__.value=this.data.buffer.length-1}});const s=i=>{const a=Object.create(t),r=Object.assign({onload:null},s.defaults,i);a.isStereo=void 0!==r.isStereo&&r.isStereo;const o=n.in("start"),u=n.in("end"),l=n.in("rate"),c=n.in("loops");return a.callback=function(){return 0},a.id=e.factory.getUID(),a.ugenName=a.callback.ugenName="sampler_"+a.id,a.inputNames=[],a.__bang__=n.bang(),a.trigger=a.__bang__.trigger,Object.assign(a,r),r.filename&&(a.data=n.data(r.filename),a.data.onload=(()=>{a.__phase__=n.counter(l,o,u,a.__bang__,c,{shouldWrap:!1}),e.factory(a,n.mul(n.ifelse(n.and(n.gte(a.__phase__,o),n.lt(a.__phase__,u)),n.peek(a.data,a.__phase__,{mode:"samples"}),0),n.in("gain")),"sampler",r),-999999999===a.end&&(a.end=a.data.buffer.length-1),null!==a.onload&&a.onload(),e.dirty(a)})),a};s.defaults={gain:1,pan:.5,rate:1,panVoices:!1,loops:0,start:0,end:-999999999};const a=e.PolyTemplate(s,["rate","pan","gain","start","end","loops"],function(t,s){const n=()=>{const i=e.memory.heap[t.__phase__.memory.value.idx];t.rate>0&&i>t.end||t.rate<0&&i<0?(s.disconnectUgen.call(s,t),t.isConnected=!1):e.blockCallbacks.push(n)};return n});return[s,a]}},{"./instrument.js":111,"genish.js":37}],119:[function(e,t,s){let n=e("genish.js"),i=e("./instrument.js");t.exports=function(e){let t=s=>{let a=Object.create(i),r=n.in("decay"),o=n.mul(r,2*n.gen.samplerate),u=n.in("snappy"),l=n.in("tune"),c=n.in("gain"),m=Object.assign({},t.defaults,s),d=n.decay(o,{initValue:0}),h=n.memo(n.gt(d,5e-4)),p=n.mul(n.noise(),d),f=n.svf(p,n.add(1e3,n.mul(n.add(1,l),1e3)),.5,1,!1),g=n.gtp(n.mul(f,u),0),j=n.svf(d,n.mul(180,n.add(l,1)),.05,2,!1),b=n.svf(d,n.mul(330,n.add(l,1)),.05,2,!1),y=n.memo(n.add(g,j,n.mul(b,.8))),x=n.mul(y,c),v=n.switch(h,x,0);return a.env=d,a=e.factory(a,v,["instruments","snare"],m)};return t.defaults={gain:1,frequency:1e3,tune:0,snappy:1,decay:.1},t}},{"./instrument.js":111,"genish.js":37}],120:[function(e,t,s){let n=e("genish.js"),i=e("./instrument.js");t.exports=function(e){const t=s=>{const a=Object.create(i),r=n.in("frequency"),o=n.in("loudness"),u=n.in("glide"),l=n.slide(r,u,u),c=n.in("attack"),m=n.in("decay"),d=n.in("sustain"),h=n.in("sustainLevel"),p=n.in("release"),f=Object.assign({},t.defaults,s);return Object.assign(a,f),a.__createGraph=function(){const t=e.oscillators.factory(a.waveform,l,a.antialias),s=e.envelopes.factory(f.useADSR,f.shape,c,m,d,h,p,f.triggerRelease);let i,u=n.mul(n.mul(t,s,o));const g=n.mul(n.in("cutoff"),r),j=n.mul(n.mul(g,n.pow(2,n.in("filterMult"))),s),b=e.filters.factory(u,j,n.in("Q"),n.in("saturation"),f);let y=n.mul(b,n.in("gain"));!0===a.panVoices?(i=n.pan(y,y,n.in("pan")),a.graph=[i.left,i.right]):a.graph=y,a.env=s,a.osc=t,a.filter=b},a.__requiresRecompilation=["waveform","antialias","filterType","filterMode","useADSR","shape"],a.__createGraph(),e.factory(a,a.graph,["instruments","synth"],f)};t.defaults={waveform:"saw",attack:44,decay:22050,sustain:44100,sustainLevel:.6,release:22050,useADSR:!1,shape:"linear",triggerRelease:!1,gain:1,pulsewidth:.25,frequency:220,pan:.5,antialias:!1,panVoices:!1,loudness:1,glide:1,saturation:1,filterMult:2,Q:.25,cutoff:.5,filterType:0,filterMode:0,isLowPass:1};let s=e.PolyTemplate(t,["frequency","attack","decay","pulsewidth","pan","gain","glide","saturation","filterMult","Q","cutoff","resonance","antialias","filterType","waveform","filterMode"]);return[t,s]}},{"./instrument.js":111,"genish.js":37}],121:[function(e,t,s){const n=e("../ugen.js"),i=e("../workletProxy.js");t.exports=function(e){let t={export(e){for(let s in t)"export"!==s&&(e[s]=t[s])},Add(...t){const s=e.factory.getUID(),a=Object.create(n);return Object.assign(a,{isop:!0,op:"+",inputs:t,ugenName:"add"+s,id:s}),i(["binops","Add"],{isop:!0,inputs:t},a)},Sub(...t){const s=e.factory.getUID(),a=Object.create(n);return Object.assign(a,{isop:!0,op:"-",inputs:t,ugenName:"sub"+s,id:s}),i(["binops","Sub"],{isop:!0,inputs:t},a)},Mul(...t){const s=e.factory.getUID(),a=Object.create(n);return Object.assign(a,{isop:!0,op:"*",inputs:t,ugenName:"mul"+s,id:s}),i(["binops","Mul"],{isop:!0,inputs:t},a)},Div(...t){const s=e.factory.getUID(),a=Object.create(n);return Object.assign(a,{isop:!0,op:"/",inputs:t,ugenName:"div"+s,id:s}),i(["binops","Div"],{isop:!0,inputs:t},a)},Mod(...t){const s=e.factory.getUID(),a=Object.create(n);return Object.assign(a,{isop:!0,op:"%",inputs:t,ugenName:"mod"+s,id:s}),i(["binops","Mod"],{isop:!0,inputs:t},a)}};return t}},{"../ugen.js":135,"../workletProxy.js":138}],122:[function(e,t,s){e("genish.js");let n=e("../ugen.js"),i=e("../workletProxy.js");t.exports=function(e){const t=Object.create(n);return Object.assign(t,{__gain:{set(t){this.mul.inputs[1]=t,e.dirty(this)},get(){return this.mul[1]}},__addInput(t){this.sum.inputs.push(t),e.dirty(this)},create(s){const n=Object.assign({},t.defaults,s),a=e.binops.Add(...n.inputs),r=e.binops.Mul(a,n.gain),o=e.Panner({input:r,pan:n.pan});return o.sum=a,o.mul=r,o.disconnectUgen=t.disconnectUgen,Object.defineProperty(o,"gain",t.__gain),o.__properties__=n,i(["Bus"],n,o)},disconnectUgen(t){let s=this.sum.inputs.indexOf(t);-1!==s&&(this.sum.inputs.splice(s,1),e.dirty(this))},defaults:{gain:1,inputs:[0],pan:.5}}),t.create.bind(t)}},{"../ugen.js":135,"../workletProxy.js":138,"genish.js":37}],123:[function(e,t,s){e("genish.js");const n=e("../ugen.js"),i=e("../workletProxy.js");t.exports=function(e){const t=Object.create(n);let s,a;return Object.assign(t,{create(n){void 0===s&&(s=e.genish.gen.globals.panL.memory.values.idx,a=e.genish.gen.globals.panR.memory.values.idx);var r=[0,0],o=Object.create(t);return Object.assign(o,{callback(){r[0]=r[1]=0;for(var e=arguments.length-1,t=arguments[e],n=0;n<e;n++){var i=arguments[n],u=Array.isArray(i);r[0]+=u?i[0]:i,r[1]+=u?i[1]:i}var l=t[s+511]+.5*(t[s+512]-t[s+511]),c=t[a+511]+.5*(t[a+512]-t[a+511]);return r[0]*=o.gain*l,r[1]*=o.gain*c,r},id:e.factory.getUID(),dirty:!1,type:"bus",inputs:[],__properties__:n},t.defaults,n),o.ugenName=o.callback.ugenName="bus2_"+o.id,i(["Bus2"],n,o)},disconnectUgen(t){let s=this.inputs.indexOf(t);-1!==s&&(this.inputs.splice(s,1),e.dirty(this))},defaults:{gain:1,pan:.5}}),t.create.bind(t)}},{"../ugen.js":135,"../workletProxy.js":138,"genish.js":37}],124:[function(e,t,s){const n=e("genish.js"),i=e("../ugen.js");t.exports=function(e){const t={export(e){for(let s in t)"export"!==s&&(e[s]=t[s])},Abs(s){const a=Object.create(i),r=n.abs(n.in("input"));return e.factory(a,r,["monops","abs"],Object.assign({},t.defaults,{inputs:[s],isop:!0}))},Pow(s,a){const r=Object.create(i),o=n.pow(n.in("input"),n.in("exponent"));return e.factory(r,o,["monops","pow"],Object.assign({},t.defaults,{inputs:[s],exponent:a,isop:!0})),r},Clamp(s,a,r){const o=Object.create(i),u=n.clamp(n.in("input"),n.in("min"),n.in("max"));return e.factory(o,u,["monops","clamp"],Object.assign({},t.defaults,{inputs:[s],isop:!0,min:a,max:r}))},Merge(t){const s=Object.create(i);return e.factory(s,n.in("input"),["monops","merge"],{inputs:[t],isop:!0},function(e){return e[0]+e[1]}),s.type="analysis",s.inputNames=["input"],s.inputs=[t],s.input=t,s},defaults:{input:0}};return t}},{"../ugen.js":135,"genish.js":37}],125:[function(e,t,s){const n=e("genish.js"),i=e("../ugen.js");t.exports=function(e){let t=s=>{const a=Object.assign({},t.defaults,s),r=Object.create(i),o=void 0!==a.input.isStereo?a.input.isStereo:Array.isArray(a.input),u=n.in("input"),l=n.in("pan");let c;return c=o?n.pan(u[0],u[1],l):n.pan(u,u,l),e.factory(r,[c.left,c.right],"panner",a),r};return t.defaults={input:0,pan:.5},t}},{"../ugen.js":135,"genish.js":37}],126:[function(e,t,s){t.exports=function(e){const t={bpm:120,export:function(e){Object.assign(e,t)},ms:function(t){return t*e.ctx.sampleRate/1e3},seconds:function(t){return t*e.ctx.sampleRate},beats:function(t){return function(){return e.ctx.sampleRate/(e.Time.bpm/60)*t}}};return t}},{}],127:[function(e,t,s){const n=e("genish.js"),i=n.history,a=n.noise;t.exports=function(){"use jsdsp";const e=i(0),t=n.sub(n.mul(a(),2),1);let s=n.add(e.out,n.div(n.mul(.02,t),1.02));return e.in(s),s=n.mul(s,3.5)}},{"genish.js":37}],128:[function(e,t,s){let n=e("genish.js");t.exports=function(e,t,s=.5,i){void 0===i&&(i={type:0});let a,r,o=n.history(),u=n.memo(n.div(e,n.gen.samplerate)),l=n.sub(-.5,u),c=n.mul(n.mul(13,t),n.pow(l,5)),m=n.sub(.376,n.mul(u,.752)),d=n.sub(1,n.mul(2,u)),h=n.accum(u,0,{min:-1});if(a=n.memo(n.mul(n.add(o.out,n.sin(n.mul(2*Math.PI,n.memo(n.add(h,n.mul(o.out,c)))))),.5)),o.in(a),1===i.type){const e=n.history(),t=n.history(),i=n.mul(n.add(e.out,n.sin(n.mul(2*Math.PI,n.memo(n.add(h,n.mul(e.out,c),s))))),.5);e.in(i),r=n.memo(n.sub(o.out,e.out)),r=n.memo(n.add(n.mul(2.5,r),n.mul(-1.5,t.out))),t.in(n.sub(a,i))}else a=n.add(n.mul(2.5,a),n.mul(-1.5,o.out)),r=a=n.add(a,m);return n.mul(r,d)}},{"genish.js":37}],129:[function(e,t,s){const n=e("genish.js"),i=e("../ugen.js"),a=e("./fmfeedbackosc.js");t.exports=function(t){let s={export(e){for(let t in s)"export"!==t&&(e[t]=s[t])},genish:{Brown:e("./brownnoise.js"),Pink:e("./pinknoise.js")},Wavetable:e("./wavetable.js")(t),Square(e){const a=Object.create(i),r=Object.assign({antialias:!1},s.defaults,e),o=s.factory("square",n.in("frequency"),r.antialias),u=n.mul(o,n.in("gain"));return t.factory(a,u,["oscillators","square"],r)},Triangle(e){const a=Object.create(i),r=Object.assign({antialias:!1},s.defaults,e),o=s.factory("triangle",n.in("frequency"),r.antialias),u=n.mul(o,n.in("gain"));return t.factory(a,u,["oscillators","triangle"],r)},PWM(e){const a=Object.create(i),r=Object.assign({antialias:!1,pulsewidth:.25},s.defaults,e),o=s.factory("pwm",n.in("frequency"),r.antialias),u=n.mul(o,n.in("gain"));return t.factory(a,u,["oscillators","PWM"],r)},Sine(e){const a=Object.create(i),r=Object.assign({},s.defaults,e),o=n.mul(n.cycle(n.in("frequency")),n.in("gain"));return t.factory(a,o,["oscillators","sine"],r)},Noise(e){const a=Object.create(i),r=Object.assign({},{gain:1,color:"white"},e);let o;switch(r.color){case"brown":o=n.mul(s.genish.Brown(),n.in("gain"));break;case"pink":o=n.mul(s.genish.Pink(),n.in("gain"));break;default:o=n.mul(n.noise(),n.in("gain"))}return t.factory(a,o,["oscillators","noise"],r)},Saw(e){const a=Object.create(i),r=Object.assign({antialias:!1},s.defaults,e),o=s.factory("saw",n.in("frequency"),r.antialias),u=n.mul(o,n.in("gain"));return t.factory(a,u,["oscillators","saw"],r)},ReverseSaw(e){const a=Object.create(i),r=Object.assign({antialias:!1},s.defaults,e),o=n.sub(1,s.factory("saw",n.in("frequency"),r.antialias)),u=n.mul(o,n.in("gain"));return t.factory(a,u,["oscillators","ReverseSaw"],r)},factory(e,t,i=!1){let r;switch(e){case"pwm":let o=n.in("pulsewidth");if(!0===i)r=a(t,1,o,{type:1});else{let e=n.phasor(t,0,{min:0});r=n.lt(e,o)}break;case"saw":r=!1===i?n.phasor(t):a(t,1);break;case"sine":r=n.cycle(t);break;case"square":r=!0===i?a(t,1,.5,{type:1}):n.wavetable(t,{buffer:s.Square.buffer,name:"square"});break;case"triangle":r=n.wavetable(t,{buffer:s.Triangle.buffer,name:"triangle"})}return r}};s.Square.buffer=new Float32Array(1024);for(let e=1023;e>=0;e--)s.Square.buffer[e]=e/1024>.5?1:-1;s.Triangle.buffer=new Float32Array(1024);for(let e=1024;e--;e=e)s.Triangle.buffer[e]=1-4*Math.abs((e/1024+.25)%1-.5);return s.defaults={frequency:440,gain:1},s}},{"../ugen.js":135,"./brownnoise.js":127,"./fmfeedbackosc.js":128,"./pinknoise.js":130,"./wavetable.js":131,"genish.js":37}],130:[function(e,t,s){const n=e("genish.js"),i=(n.history,n.data),a=n.noise;t.exports=function(){"use jsdsp";const e=i(8,1,{meta:!0}),t=n.sub(n.mul(a(),2),1);e[0]=n.add(n.mul(.99886,e[0]),n.mul(t,.0555179)),e[1]=n.add(n.mul(.99332,e[1]),n.mul(t,.0750579)),e[2]=n.add(n.mul(.969,e[2]),n.mul(t,.153852)),e[3]=n.add(n.mul(.8865,e[3]),n.mul(t,.3104856)),e[4]=n.add(n.mul(.55,e[4]),n.mul(t,.5329522)),e[5]=n.sub(n.mul(-.7616,e[5]),n.mul(t,.016898));const s=n.mul(n.add(n.add(n.add(n.add(n.add(n.add(n.add(e[0],e[1]),e[2]),e[3]),e[4]),e[5]),e[6]),n.mul(t,.5362)),.11);return e[6]=n.mul(t,.115926),s}},{"genish.js":37}],131:[function(e,t,s){let n=e("genish.js"),i=e("../ugen.js");t.exports=function(e){return n.wavetable=function(e,t){let s={immutable:!0};void 0!==t.name&&(s.global=t.name);const i=n.data(t.buffer,1,s);return n.peek(i,n.phasor(e,0,{min:0}))},function(t){const s=Object.create(i),a=Object.assign({},e.oscillators.defaults,t),r=n.wavetable(n.in("frequency"),a),o=n.mul(r,n.in("gain"));return e.factory(s,o,"wavetable",a),s}}},{"../ugen.js":135,"genish.js":37}],132:[function(e,t,s){const n=e("../external/priorityqueue.js");e("big.js");let i={phase:0,queue:new n((e,t)=>e.time===t.time?t.priority-e.priority:e.time-t.time),clear(){this.queue.data.length=0,this.queue.length=0},add(e,t,s=0){e+=this.phase,this.queue.push({time:e,func:t,priority:s})},tick(){if(this.queue.length){let e=this.queue.peek();for(;this.phase>=e.time&&(e.func(),this.queue.pop(),void 0!==(e=this.queue.peek())););}this.phase++}};t.exports=i},{"../external/priorityqueue.js":83,"big.js":139}],133:[function(e,t,s){e("genish.js");const n=e("../workletProxy.js"),i=e("../ugen.js");t.exports=function(e){const t=Object.create(i);Object.assign(t,{start(){return this.connect(),this},stop(){return this.disconnect(),this}});const s={create(i){const a=Object.create(t),r=Object.assign({},s.defaults,i);a.phase=0,a.inputNames=["rate"],a.inputs=[1],a.nextTime=0,a.valuesPhase=0,a.timingsPhase=0,a.id=e.factory.getUID(),a.dirty=!0,a.type="seq",a.__properties__=r,void 0===r.target?a.anonFunction=!0:(a.anonFunction=!1,a.callFunction="function"==typeof r.target[r.key]),r.id=e.factory.getUID();const o=Object.assign({},s.defaults,r);Object.assign(a,o),a.__properties__=o,a.callback=function(e){if(a.phase>=a.nextTime){let e=a.values[a.valuesPhase++%a.values.length];(a.anonFunction||"function"==typeof e)&&(e=e()),!1===a.anonFunction&&(!1===a.callFunction?a.target[a.key]=e:a.target[a.key](e)),a.phase-=a.nextTime;let t=a.timings[a.timingsPhase++%a.timings.length];"function"==typeof t&&(t=t()),a.nextTime=t}return a.phase+=e,0},a.ugenName=a.callback.ugenName="seq_"+a.id;let u=a.rate;return Object.defineProperty(a,"rate",{get:()=>u,set(t){u!==t&&(e.dirty(a),u=t)}}),n(["Sequencer2"],r,a)},defaults:{rate:1}};return s.create}},{"../ugen.js":135,"../workletProxy.js":138,"genish.js":37}],134:[function(e,t,s){e("../external/priorityqueue.js"),e("big.js");const n=e("../workletProxy.js");t.exports=function(e){let t=s=>{let i,a={__isRunning:!1,__valuesPhase:0,__timingsPhase:0,__type:"seq",tick(){let t=a.values[a.__valuesPhase++%a.values.length],s=a.timings[a.__timingsPhase++%a.timings.length];"function"==typeof s&&(s=s()),"function"==typeof t&&void 0===a.target?t():"function"==typeof a.target[a.key]?("function"==typeof t&&(t=t()),a.target[a.key](t)):("function"==typeof t&&(t=t()),a.target[a.key]=t),!0===a.__isRunning&&e.scheduler.add(s,a.tick,a.priority)},start:(t=0)=>(a.__isRunning=!0,e.scheduler.add(t,a.tick,a.priority),i),stop:()=>(a.__isRunning=!1,i)};s.id=e.factory.getUID();const r=Object.assign({},t.defaults,s);return Object.assign(a,r),a.__properties__=r,i=n(["Sequencer"],r,a)};return t.defaults={priority:0,values:[],timings:[]},t.make=function(e,s,n,i){return t({values:e,timings:s,target:n,key:i})},t}},{"../external/priorityqueue.js":83,"../workletProxy.js":138,"big.js":139}],135:[function(e,t,s){let n={free:function(){Gibberish.genish.gen.free(this.graph)},print:function(){console.log(this.callback.toString())},connect:function(e,t=1){void 0===this.connected&&(this.connected=[]);let s=1===t?this:Gibberish.binops.Mul(this,t);return void 0!==e&&null!==e||(e=Gibberish.output),"function"==typeof e.__addInput?e.__addInput(s):e.sum&&e.sum.inputs?e.sum.inputs.push(s):e.inputs?e.inputs.push(s):e.input=s,Gibberish.dirty(e),this.connected.push([e,s]),this},disconnect:function(e){if(void 0===e){for(let e of this.connected)e[0].disconnectUgen(e[1]);this.connected.length=0}else{const t=this.connected.find(t=>t[0]===e);e.disconnectUgen(t[1]);const s=this.connected.indexOf(t);this.connected.splice(s,1)}},chain:function(e,t=1){return this.connect(e,t),e},__redoGraph:function(){this.__createGraph(),this.callback=Gibberish.genish.gen.createCallback(this.graph,Gibberish.memory,!1,!0),this.inputNames=new Set(Gibberish.genish.gen.parameters),this.callback.ugenName=this.ugenName,Gibberish.dirty(this)}};t.exports=n},{}],136:[function(e,t,s){const n=e("./workletProxy.js"),i=e("./fx/effect.js");t.exports=function(e){let t=0;const s=function(t,a,r,o,u=null,l=!0){t.callback=null===u?e.genish.gen.createCallback(a,e.memory,!1,!0):u;let c=Array.isArray(r)?r[r.length-1]:r;Object.assign(t,{type:"ugen",id:s.getUID(),ugenName:c+"_",graph:a,inputNames:new Set(e.genish.gen.parameters),isStereo:Array.isArray(a),dirty:!0,__properties__:o}),t.ugenName+=t.id,t.callback.ugenName=t.ugenName;for(let s of t.inputNames){if("memory"===s)continue;let n,i=o[s],a=Object.getOwnPropertyDescriptor(t,s);void 0!==a&&(n=a.set),Object.defineProperty(t,s,{get:()=>i,set(s){i!==s&&(e.dirty(t),void 0!==n&&n(s),i=s)}})}if(i.isPrototypeOf(t)){let s=t.bypass;Object.defineProperty(t,"bypass",{get:()=>s,set(n){s!==n&&(e.dirty(t),s=n)}})}return void 0!==t.__requiresRecompilation&&t.__requiresRecompilation.forEach(s=>{let n=t[s];Object.defineProperty(t,s,{get:()=>n,set(t){n!==t&&(n=t,o[s]=t,"worklet"!==e.mode&&console.log("redoing graph!",t),this.__redoGraph())}})}),l?n(r,o,t):t};return s.getUID=(()=>t++),s}},{"./fx/effect.js":99,"./workletProxy.js":138}],137:[function(e,t,s){let n=e("genish.js");t.exports=function(e){let t={createContext(s,i,a){let r="undefined"==typeof AudioContext?webkitAudioContext:AudioContext,o=()=>{if(void 0!==r)if(e.ctx=void 0===s?new r:s,n.gen.samplerate=e.ctx.sampleRate,n.utilities.ctx=e.ctx,document&&document.documentElement&&"ontouchstart"in document.documentElement){if(window.removeEventListener("touchstart",o),"ontouchstart"in document.documentElement){let e=t.ctx.createBufferSource();e.connect(t.ctx.destination),e.noteOn(0)}}else window.removeEventListener("mousedown",o);"function"==typeof i&&i(a)};return document&&document.documentElement&&"ontouchstart"in document.documentElement?window.addEventListener("touchstart",o):window.addEventListener("mousedown",o),e.ctx},createScriptProcessor:t=>(e.node=e.ctx.createScriptProcessor(1024,0,2),e.clearFunction=function(){return 0},e.callback=e.clearFunction,e.node.onaudioprocess=function(t){let s=e,n=s.callback,i=t.outputBuffer,a=e.scheduler,r=i.getChannelData(0),o=i.getChannelData(1),u=e.blockCallbacks.length;if(0!==u){for(let t=0;t<u;t++)e.blockCallbacks[t]();e.blockCallbacks.splice(0,u)}for(let e=0,t=r.length;e<t;e++){a.tick(),s.graphIsDirty&&(n=s.generateCallback());let t=n.apply(null,s.callbackUgens);r[e]=t[0],o[e]=t[1]}},e.node.connect(e.ctx.destination),t(),e.node),createWorklet(t){e.ctx.audioWorklet.addModule(e.workletPath).then(()=>{e.worklet=new AudioWorkletNode(e.ctx,"gibberish",{outputChannelCount:[2]}),e.worklet.connect(e.ctx.destination),e.worklet.port.onmessage=(t=>{switch(t.data.address){case"get":let s,n=t.data.name;"Gibberish"===n[0]&&(s=e,n.shift());for(let e of n)s=s[e];e.worklet.port.postMessage({address:"set",name:"Gibberish."+n.join("."),value:s});break;case"state":const i=t.data.messages;if(0===i.length)return;e.preventProxy=!0;for(let t=0;t<i.length;t+=3){const s=i[t],n=i[t+1],a=i[t+2];e.worklet.ugens.get(s)[n]=a}e.preventProxy=!1}}),e.worklet.ugens=new Map,t()})},wrap:(e,...t)=>({action:"wrap",value:e,args:t.map(e=>({id:e.id}))}),export(e){e.wrap=this.wrap}};return t}},{"genish.js":37}],138:[function(e,t,s){const n=e("serialize-javascript"),i=e=>"object"==typeof e&&void 0!==e.id?"seq"!==e.__type?{id:e.id,prop:e.prop}:n(e):e;t.exports=function(e,t,s){if("worklet"===Gibberish.mode&&!1===Gibberish.preventProxy){return function(e,t,s){const a={};for(let e in t)if("object"==typeof t[e]&&void 0!==t[e].__meta__)a[e]=t[e].__meta__;else if(Array.isArray(t[e])){const s=[];for(let n=0;n<t[e].length;n++)s[n]=i(t[e][n]);a[e]=s}else"object"==typeof t[e]?a[e]=i(t[e]):a[e]=t[e];let r=n(a);if(Array.isArray(e)){const t=e[e.length-1];e[e.length-1]=t[0].toUpperCase()+t.substring(1)}else e=[e[0].toUpperCase()+e.substring(1)];s.__meta__={address:"add",name:e,properties:r,id:s.id},Gibberish.worklet.ugens.set(s.id,s),Gibberish.worklet.port.postMessage(s.__meta__)}(e,t,s),new Proxy(s,{get(e,t,n){if("function"==typeof e[t]&&-1===t.indexOf("__")){return new Proxy(e[t],{apply(n,a,r){const o=r.map(i);return Gibberish.worklet.port.postMessage({address:"method",object:s.id,name:t,args:o}),e[t].apply(a,r)}})}return e[t]},set(e,t,n,a){if("connected"!==t){const e=i(n);Gibberish.worklet.port.postMessage({address:"set",object:s.id,name:t,value:e})}e[t]=n}})}if("processor"===Gibberish.mode&&!1===Gibberish.preventProxy){return new Proxy(s,{set:(e,t,n,i)=>(-1===t.indexOf("__")&&void 0!==Gibberish.processor&&Gibberish.processor.messages.push(s.id,t,n),e[t]=n,!0)})}return s}},{"serialize-javascript":140}],139:[function(e,t,s){!function(e){"use strict";var s,n=20,i=1,a=-7,r=21,o={},u=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function l(e,t,s){var n=e.constructor,i=t-(e=new n(e)).e,a=e.c;for(a.length>++t&&c(e,i,n.RM),a[0]?s?i=t:(a=e.c,i=e.e+i+1):++i;a.length<i;a.push(0));return i=e.e,1===s||s&&(t<=i||i<=n.E_NEG)?(e.s<0&&a[0]?"-":"")+(a.length>1?a[0]+"."+a.join("").slice(1):a[0])+(i<0?"e":"e+")+i:e.toString()}function c(e,t,s,n){var i,a=e.c,r=e.e+t+1;if(1===s?n=a[r]>=5:2===s?n=a[r]>5||5==a[r]&&(n||r<0||a[r+1]!==i||1&a[r-1]):3===s?n=n||a[r]!==i||r<0:(n=!1,0!==s&&m("!Big.RM!")),r<1||!a[0])n?(e.e=-t,e.c=[1]):e.c=[e.e=0];else{if(a.length=r--,n)for(;++a[r]>9;)a[r]=0,r--||(++e.e,a.unshift(1));for(r=a.length;!a[--r];a.pop());}return e}function m(e){var t=new Error(e);throw t.name="BigError",t}o.abs=function(){var e=new this.constructor(this);return e.s=1,e},o.cmp=function(e){var t,s=this,n=s.c,i=(e=new s.constructor(e)).c,a=s.s,r=e.s,o=s.e,u=e.e;if(!n[0]||!i[0])return n[0]?a:i[0]?-r:0;if(a!=r)return a;if(t=a<0,o!=u)return o>u^t?1:-1;for(a=-1,r=(o=n.length)<(u=i.length)?o:u;++a<r;)if(n[a]!=i[a])return n[a]>i[a]^t?1:-1;return o==u?0:o>u^t?1:-1},o.div=function(e){var t=this,s=t.constructor,n=t.c,i=(e=new s(e)).c,a=t.s==e.s?1:-1,r=s.DP;if((r!==~~r||r<0||r>1e6)&&m("!Big.DP!"),!n[0]||!i[0])return n[0]==i[0]&&m(NaN),i[0]||m(a/0),new s(0*a);var o,u,l,d,h,p,f=i.slice(),g=o=i.length,j=n.length,b=n.slice(0,o),y=b.length,x=e,v=x.c=[],$=0,_=r+(x.e=t.e-e.e)+1;for(x.s=a,a=_<0?0:_,f.unshift(0);y++<o;b.push(0));do{for(l=0;l<10;l++){if(o!=(y=b.length))d=o>y?1:-1;else for(h=-1,d=0;++h<o;)if(i[h]!=b[h]){d=i[h]>b[h]?1:-1;break}if(!(d<0))break;for(u=y==o?i:f;y;){if(b[--y]<u[y]){for(h=y;h&&!b[--h];b[h]=9);--b[h],b[y]+=10}b[y]-=u[y]}for(;!b[0];b.shift());}v[$++]=d?l:++l,b[0]&&d?b[y]=n[g]||0:b=[n[g]]}while((g++<j||b[0]!==p)&&a--);return v[0]||1==$||(v.shift(),x.e--),$>_&&c(x,r,s.RM,b[0]!==p),x},o.eq=function(e){return!this.cmp(e)},o.gt=function(e){return this.cmp(e)>0},o.gte=function(e){return this.cmp(e)>-1},o.lt=function(e){return this.cmp(e)<0},o.lte=function(e){return this.cmp(e)<1},o.sub=o.minus=function(e){var t,s,n,i,a=this,r=a.constructor,o=a.s,u=(e=new r(e)).s;if(o!=u)return e.s=-u,a.plus(e);var l=a.c.slice(),c=a.e,m=e.c,d=e.e;if(!l[0]||!m[0])return m[0]?(e.s=-u,e):new r(l[0]?a:0);if(o=c-d){for((i=o<0)?(o=-o,n=l):(d=c,n=m),n.reverse(),u=o;u--;n.push(0));n.reverse()}else for(s=((i=l.length<m.length)?l:m).length,o=u=0;u<s;u++)if(l[u]!=m[u]){i=l[u]<m[u];break}if(i&&(n=l,l=m,m=n,e.s=-e.s),(u=(s=m.length)-(t=l.length))>0)for(;u--;l[t++]=0);for(u=t;s>o;){if(l[--s]<m[s]){for(t=s;t&&!l[--t];l[t]=9);--l[t],l[s]+=10}l[s]-=m[s]}for(;0===l[--u];l.pop());for(;0===l[0];)l.shift(),--d;return l[0]||(e.s=1,l=[d=0]),e.c=l,e.e=d,e},o.mod=function(e){var t,s=this,n=s.constructor,i=s.s,a=(e=new n(e)).s;return e.c[0]||m(NaN),s.s=e.s=1,t=1==e.cmp(s),s.s=i,e.s=a,t?new n(s):(i=n.DP,a=n.RM,n.DP=n.RM=0,s=s.div(e),n.DP=i,n.RM=a,this.minus(s.times(e)))},o.add=o.plus=function(e){var t,s=this,n=s.constructor,i=s.s,a=(e=new n(e)).s;if(i!=a)return e.s=-a,s.minus(e);var r=s.e,o=s.c,u=e.e,l=e.c;if(!o[0]||!l[0])return l[0]?e:new n(o[0]?s:0*i);if(o=o.slice(),i=r-u){for(i>0?(u=r,t=l):(i=-i,t=o),t.reverse();i--;t.push(0));t.reverse()}for(o.length-l.length<0&&(t=l,l=o,o=t),i=l.length,a=0;i;)a=(o[--i]=o[i]+l[i]+a)/10|0,o[i]%=10;for(a&&(o.unshift(a),++u),i=o.length;0===o[--i];o.pop());return e.c=o,e.e=u,e},o.pow=function(e){var t=this,s=new t.constructor(1),n=s,i=e<0;for((e!==~~e||e<-1e6||e>1e6)&&m("!pow!"),e=i?-e:e;1&e&&(n=n.times(t)),e>>=1;)t=t.times(t);return i?s.div(n):n},o.round=function(e,t){var s=this,n=s.constructor;return null==e?e=0:(e!==~~e||e<0||e>1e6)&&m("!round!"),c(s=new n(s),e,null==t?n.RM:t),s},o.sqrt=function(){var e,t,s,n=this,i=n.constructor,a=n.c,r=n.s,o=n.e,u=new i("0.5");if(!a[0])return new i(n);r<0&&m(NaN),0===(r=Math.sqrt(n.toString()))||r===1/0?((e=a.join("")).length+o&1||(e+="0"),(t=new i(Math.sqrt(e).toString())).e=((o+1)/2|0)-(o<0||1&o)):t=new i(r.toString()),r=t.e+(i.DP+=4);do{s=t,t=u.times(s.plus(n.div(s)))}while(s.c.slice(0,r).join("")!==t.c.slice(0,r).join(""));return c(t,i.DP-=4,i.RM),t},o.mul=o.times=function(e){var t,s=this,n=s.constructor,i=s.c,a=(e=new n(e)).c,r=i.length,o=a.length,u=s.e,l=e.e;if(e.s=s.s==e.s?1:-1,!i[0]||!a[0])return new n(0*e.s);for(e.e=u+l,r<o&&(t=i,i=a,a=t,l=r,r=o,o=l),t=new Array(l=r+o);l--;t[l]=0);for(u=o;u--;){for(o=0,l=r+u;l>u;)o=t[l]+a[u]*i[l-u-1]+o,t[l--]=o%10,o=o/10|0;t[l]=(t[l]+o)%10}for(o&&++e.e,t[0]||t.shift(),u=t.length;!t[--u];t.pop());return e.c=t,e},o.toString=o.valueOf=o.toJSON=function(){var e=this,t=e.constructor,s=e.e,n=e.c.join(""),i=n.length;if(s<=t.E_NEG||s>=t.E_POS)n=n.charAt(0)+(i>1?"."+n.slice(1):"")+(s<0?"e":"e+")+s;else if(s<0){for(;++s;n="0"+n);n="0."+n}else if(s>0)if(++s>i)for(s-=i;s--;n+="0");else s<i&&(n=n.slice(0,s)+"."+n.slice(s));else i>1&&(n=n.charAt(0)+"."+n.slice(1));return e.s<0&&e.c[0]?"-"+n:n},o.toExponential=function(e){return null==e?e=this.c.length-1:(e!==~~e||e<0||e>1e6)&&m("!toExp!"),l(this,e,1)},o.toFixed=function(e){var t,s=this,n=s.constructor,i=n.E_NEG,a=n.E_POS;return n.E_NEG=-(n.E_POS=1/0),null==e?t=s.toString():e===~~e&&e>=0&&e<=1e6&&(t=l(s,s.e+e),s.s<0&&s.c[0]&&t.indexOf("-")<0&&(t="-"+t)),n.E_NEG=i,n.E_POS=a,t||m("!toFix!"),t},o.toPrecision=function(e){return null==e?this.toString():((e!==~~e||e<1||e>1e6)&&m("!toPre!"),l(this,e-1,2))},s=function e(){function t(s){var n=this;if(!(n instanceof t))return void 0===s?e():new t(s);s instanceof t?(n.s=s.s,n.e=s.e,n.c=s.c.slice()):function(e,t){var s,n,i;for(0===t&&1/t<0?t="-0":u.test(t+="")||m(NaN),e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(s=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(s<0&&(s=n),s+=+t.slice(n+1),t=t.substring(0,n)):s<0&&(s=t.length),n=0;"0"==t.charAt(n);n++);if(n==(i=t.length))e.c=[e.e=0];else{for(;"0"==t.charAt(--i););for(e.e=s-n-1,e.c=[],s=0;n<=i;e.c[s++]=+t.charAt(n++));}}(n,s),n.constructor=t}return t.prototype=o,t.DP=n,t.RM=i,t.E_NEG=a,t.E_POS=r,t}(),void 0!==t&&t.exports?t.exports=s:e.Big=s}(this)},{}],140:[function(e,t,s){"use strict";var n=Math.floor(1099511627776*Math.random()).toString(16),i=new RegExp('"@__(F|R|D)-'+n+'-(\\d+)__@"',"g"),a=/\{\s*\[native code\]\s*\}/g,r=/[<>\/\u2028\u2029]/g,o={"<":"\\u003C",">":"\\u003E","/":"\\u002F","\u2028":"\\u2028","\u2029":"\\u2029"};function u(e){return o[e]}t.exports=function(e,t){t||(t={}),"number"!=typeof t&&"string"!=typeof t||(t={space:t});var s,o=[],l=[],c=[];return"string"!=typeof(s=t.isJSON&&!t.space?JSON.stringify(e):JSON.stringify(e,t.isJSON?null:function(e,t){if(!t)return t;var s=this[e],i=typeof s;if("object"===i){if(s instanceof RegExp)return"@__R-"+n+"-"+(l.push(s)-1)+"__@";if(s instanceof Date)return"@__D-"+n+"-"+(c.push(s)-1)+"__@"}return"function"===i?"@__F-"+n+"-"+(o.push(s)-1)+"__@":t},t.space))?String(s):(!0!==t.unsafe&&(s=s.replace(r,u)),0===o.length&&0===l.length&&0===c.length?s:s.replace(i,function(e,t,s){if("D"===t)return'new Date("'+c[s].toISOString()+'")';if("R"===t)return l[s].toString();var n=o[s],i=n.toString();if(a.test(i))throw new TypeError("Serializing native function: "+n.name);return i}))}},{}],141:[function(e,t,s){"use strict";let n={create(e=4096,t=Float32Array){let s=Object.create(this);return Object.assign(s,{heap:new t(e),list:{},freeList:{}}),s},alloc(e,t){let s=-1;if(e>this.heap.length)throw Error("Allocation request is larger than heap size of "+this.heap.length);for(let n in this.freeList){let i=this.freeList[n];if(i.size>=e){if(s=n,this.list[s]={size:e,immutable:t,references:1},i.size!==e){let t,n=s+e;for(let e in this.list)e>n&&(t=e-n,this.freeList[n]=t)}break}}if(-1!==s&&delete this.freeList[s],-1===s){let n,i=Object.keys(this.list);s=i.length?(n=parseInt(i[i.length-1]))+this.list[n].size:0,this.list[s]={size:e,immutable:t,references:1}}if(s+e>=this.heap.length)throw Error("No available blocks remain sufficient for allocation request.");return s},addReference(e){void 0!==this.list[e]&&this.list[e].references++},free(e){if(void 0===this.list[e])throw Error("Calling free() on non-existing block.");let t=this.list[e];if(0!==t&&(t.references--,0===t.references&&!0!==t.immutable)){this.list[e]=0;let t=0;for(let s in this.list)if(s>e){t=s-e;break}this.freeList[e]=t}}};t.exports=n},{}]},{},[106])(106)});